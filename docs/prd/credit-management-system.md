# 📌 **PRD — 연체채권 관리 & 매출통제 해제 시스템**

### Version
v0.1 (Draft)

### 작성자
EAGLE / ChatGPT

### 목적
본 시스템은 연체채권 모니터링, 영업사원 의견 수집, 채권회의 운영, 매출통제 해제 요청 및 승인 프로세스를 데이터 기반으로 관리하기 위한 Web 기반 SaaS 애플리케이션이다.
채권 리스크를 정량·정성 정보로 평가하고, 내부 규정에 근거한 매출통제 해제 의사결정을 체계화한다.

---

# 1. **Product Overview**

본 애플리케이션은 다음의 주요 목적을 가진다:

1. **연체채권 현황 실시간 조회**
   * Aging Bucket 기반 연체채권 대시보드 제공
   * 거래처별·영업사원별·부서별 필터링

2. **채권관리 회의 운영(월 1회)**
   * 채권회의 회차 데이터 생성 및 아카이빙
   * 회의에 포함된 거래처 목록 저장
   * 회의별 영업사원 의견 기록

3. **매출통제 해제 요청 및 승인 프로세스**
   * 영업사원 → 영업본부장 → CEO → 최종 해제
   * 해제 근거자료 자동 패키징(총채권연령 등)

4. **채권검토를 위한 정량/정성 데이터 제공**
   * 총채권연령
   * 연체 구간별 금액(1개월, 2개월, …)
   * 최근 3회 수금 기록(날짜 + 금액 + 합계)
   * 최근 1년 월별 수금 내역
   * 최근 3개월 평균매출
   * 직전 매출통제 관련 영업 의견
   * 최신 거래데이터(품목, 수량, 단가, 금액)

5. **히스토리 기반 리스크관리 체계 구축**
   * 거래처별 해제 요청 이력, 미수관리 기록 저장
   * 향후 AI 기반 리스크 점수화(Scoring)까지 가능

---

# 2. **User Persona**

### **1) 영업사원**
* 담당 거래처의 연체 현황을 조회
* 채권회의 전 의견 입력
* 매출통제 해제 요청서 제출
* 수금 예정 정보 제공

### **2) 영업본부장(팀장/실장/본부장)**
* 영업담당자 의견 검토
* 해제 요청 승인 1차 권한

### **3) CEO**
* 최종 승인 및 매출통제 해제 결정

### **4) 채권관리자(재무/회계)**
* 전체 채권현황 모니터링
* 회의 진행·데이터 관리
* 리포트 생성

---

# 3. **Scope**

### 3.1 In-Scope 기능
* AR Aging 대시보드
* 월별 채권관리 회의 생성 및 거래처 포함
* 영업사원 의견 입력·수정
* 해제 요청 생성
* 해제 프로세스 워크플로우(팀장→본부장→CEO 승인)
* 해제 요청서 자동 생성(정량 데이터 포함)
* 거래처 기반 상세 채권리스크 패널 제공
* Slack/n8n 알림(후순위)

### 3.2 Out-of-Scope(초기버전 제외)
* 자동 Early Warning AI 스코어링
* 자동 수금예측 모델
* 외부 ERP 통합(2차 단계)

---

# 4. **System Workflow (요약)**

### A. 월별 채권회의 운영
```
채권관리자 → 회의 생성 → 거래처 목록 자동 수집 →
영업사원 의견 입력 → 회의 중 심사 → 매출통제 대상 추출
```

### B. 매출통제 해제 프로세스
```
영업사원 → 해제 요청 제출 → 영업총괄 검토 → CEO 승인 → 시스템 자동 해제 처리
```

### C. 해제를 위한 판단자료 자동 생성
* 총채권연령
* 월별 미수채권 현황 (1개월·2개월…)
* 최근 3회 수금 기록
* 최근 1년 수금 캘린더 요약
* 최근 3개월 평균매출
* 최근 거래내역 상세
* 직전 매출통제 의견(문자 기록)

---

# 5. **Detailed Requirements**

## 5.1 AR Aging Dashboard

* 필터:
  * 회사(Company), 영업사원, 부서, 유통구조, 거래처명, 위험도구간
* 출력 데이터:
  * Total, Bucket별 Aging(0~30, 31~60,…, 365+)
  * 최근 3회 수금
  * 최근 12개월 수금 그래프
  * 최근 3개월 평균매출

## 5.2 Monthly Credit Meeting Module (채권회의)

* 신규 회의 생성(월 기준)
* 회의에 사용된 거래처 리스트 저장
* 각 거래처별:
  * 연체 현황 스냅샷 저장
  * 영업사원 의견 입력칸
  * 채권상태 예측("해제검토", "관심필요", "고위험" 등 표시)
* 회의 결과 저장
  * 해제 요청 필요 거래처 목록 자동 생성

## 5.3 Sales Rep's Credit Opinion (영업의견)

필수 입력 항목:
* 수금 약속 내용
* 고객 반응 및 신용상태 의견
* 직전 대비 개선/악화 사유
* 매출 중단 여부 영향

## 5.4 Unblocking Request Workflow (매출통제 해제)

### 단계

1. **영업사원 제출**
   * 해제 대상 거래처 선택
   * 해제 사유 입력
   * 수금 계획 입력

2. **영업본부장 승인(1차)**
   * 의견 검토
   * 보완 요청 기능

3. **CEO 승인(최종)**
   * 승인 → 시스템 상태를 "해제완료"로 변경
   * Slack/메일 자동 알림(선택)

4. 히스토리 자동 기록

---

# 6. **Data Model (Draft)**

### 6.1 Core Tables

* `ar_aging` (연체채권 현황) — 이미 제공됨
* `credit_meeting` (채권회의 메타)
* `credit_meeting_customer` (회의-거래처 매핑)
* `credit_sales_opinion` (영업의견)
* `credit_unblock_request` (해제 요청)
* `credit_unblock_approval` (해제 승인 내역)
* `customer_sales_history` (최근 거래내역)
* `customer_collection_history` (수금 내역)
* `customer_monthly_summary` (월별 수금/월매출 요약)

→ 원하시면 테이블 DDL도 생성 가능.

---

# 7. **Unblocking Decision Criteria (초안)**

해제 검토 시 자동 계산되어 제공되어야 하는 지표:

### 7.1 정량지표

| 항목 | 규칙 |
|------|------|
| 총채권 연령 | Weighted Aging 계산 또는 Max Aging |
| 월별 미수채권 | 1~12개월 bucket |
| 최근 3회 수금 | 날짜 + 금액 + 합계 |
| 최근 1년 수금 | 월별 막대그래프 |
| 최근 3개월 평균매출 | 직전월 제외, 3개월 average |
| 최근 거래내역 | 품목/수량/단가/금액 테이블 |

### 7.2 정성지표

* 영업사원 의견
* 과거 해제 이력
* 최근 거래태도
* 회의에서의 종합 평가

---

# 8. **UI/UX Structure (Draft)**

### 8.1 주요 화면

1. **AR Dashboard**
2. **채권회의 리스트**
3. **채권회의 상세 화면**
   * 거래처 테이블
   * 영업의견 입력칸
4. **해제 요청서 화면**
5. **해제 승인 화면(CEO/본부장)**
6. **거래처 크레딧 상세 패널**

### 8.2 거래처 크레딧 상세 패널 구성

```
[1] 연체현황 Summary
[2] Aging Bucket 그래프
[3] 최근 3회 수금
[4] 최근 12개월 수금 그래프
[5] 최근 3개월 평균매출
[6] 최근 거래내역
[7] 직전 회의 의견
```

---

# 9. **Workflow Diagram (High-level)**

(요청 시 BPMN으로 만들어 드릴게요.)

```
회의 생성 → 거래처 데이터 로딩 → 영업의견 수집 →
회의결과 저장 → 해제대상 선별 → 해제요청 생성 →
1차 승인 → 최종 승인 → 매출통제 해제 적용
```

---

# 10. **Open Questions (추가 논의 필요)**

1. 매출통제 해제의 **규정 기준(Threshold)** 은 어느 수준까지 시스템에 자동화할지?
2. 최근 거래내역은 Postgres/MSSQL ERP 어디에서 가져오는지?
3. 해제 요청 승인 후 ERP에 "통제해제" 반영 방식?
4. 영업사원이 입력해야 할 의견 항목의 구체적 구조?
5. 채권회의는 월 1회 고정인가? 회차 제한 필요한가?

---

# 11. **Next Step**

* 위 PRD Draft를 기반으로 논의하여
  * ✔ 기능 범위 확정
  * ✔ 승인 워크플로우 정의
  * ✔ 데이터 모델(DML/DDL) 확정
  * ✔ UI 와이어프레임 제작
  * ✔ n8n ETL / Slack 알림 설계

  를 진행할 수 있습니다.
