import{r as a,j as e}from"./index-BDCdW1US.js";function h({limit:u=50}){const[i,o]=a.useState([]),[c,d]=a.useState(!1),[l,m]=a.useState(null);async function f(){d(!0),m(null);try{const t=await fetch(`/api/v1/demand/owner-stats?limit=${u}`);if(!t.ok){let s=`HTTP ${t.status}`;try{const r=await t.json();r!=null&&r.error&&(s=r.error)}catch{}throw new Error(s)}const n=await t.json(),g=Array.isArray(n)?n.map(s=>({salesRepName:String(s.salesRepName??"(미지정)"),customerCount:Number(s.customerCount??0),managedCount:Number(s.managedCount??0)})):[];o(g)}catch(t){m(t.message||"로드 중 오류가 발생했습니다"),o([])}finally{d(!1)}}a.useEffect(()=>{f()},[]);const p=a.useMemo(()=>c?e.jsx("div",{className:"muted",children:"불러오는 중…"}):l?e.jsx("div",{className:"error",children:l}):i.length===0?e.jsx("div",{className:"empty-state",children:"데이터가 없습니다"}):e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(160px, 1fr))",gap:8},children:i.map((t,n)=>e.jsxs("div",{className:"card",style:{padding:8,display:"flex",flexDirection:"column",gap:4},children:[e.jsx("div",{style:{fontWeight:700,fontSize:13,whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},children:t.salesRepName}),e.jsxs("div",{style:{fontSize:16,fontWeight:700},children:[t.customerCount.toLocaleString(),e.jsxs("span",{className:"muted",style:{fontSize:12,marginLeft:6},children:["(담당거래처 ",Number(t.managedCount??0).toLocaleString(),")"]})]})]},n))}),[i,c,l]);return e.jsxs("section",{className:"card",style:{marginTop:8},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:e.jsx("b",{children:"수요등록 현황"})}),e.jsx("div",{style:{marginTop:8},children:p})]})}export{h as DemandOwnerStatsPanel};
