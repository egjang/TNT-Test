import{r,j as e}from"./index-BDCdW1US.js";function f(){const[n,d]=r.useState([]),[o,h]=r.useState(!1),[l,m]=r.useState(null),[c,x]=r.useState(!0);async function g(){h(!0),m(null);try{const t=new URL("/api/v1/demand",window.location.origin);if(t.searchParams.set("limit","500"),c){const s=localStorage.getItem("tnt.sales.assigneeId")||"";s&&t.searchParams.set("assigneeId",s)}const a=await fetch(t.toString());if(!a.ok){let s=`HTTP ${a.status}`;try{const i=await a.json();i!=null&&i.error&&(s=i.error)}catch{}throw new Error(s)}const u=await a.json(),p=Array.isArray(u)?u.map(s=>({salesRepName:String(s.salesRepName??""),customerId:String(s.customerId??""),customerName:String(s.customerName??""),supplierName:s.supplierName??"",itemSubcategory:s.itemSubcategory??"",salesMgmtUnit:s.salesMgmtUnit??"",shareRate:s.shareRate!=null?Number(s.shareRate):void 0,createdAt:s.createdAt??"",updatedAt:s.updatedAt??""})):[];d(p)}catch(t){m(t.message||"조회 중 오류가 발생했습니다"),d([])}finally{h(!1)}}r.useEffect(()=>{g()},[c]);const j=r.useMemo(()=>o?e.jsx("div",{className:"muted",children:"불러오는 중…"}):l?e.jsx("div",{className:"error",children:l}):n.length===0?e.jsx("div",{className:"empty-state",children:"데이터가 없습니다"}):e.jsx("div",{className:"table-container",style:{border:"1px solid var(--border)",borderRadius:8},children:e.jsxs("table",{className:"table",style:{width:"100%"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"영업담당"}),e.jsx("th",{style:{width:140},children:"거래처번호"}),e.jsx("th",{children:"거래처명"}),e.jsx("th",{children:"공급사"}),e.jsx("th",{children:"품목중분류"}),e.jsx("th",{children:"영업관리단위"}),e.jsx("th",{style:{width:80,textAlign:"right"},children:"점유율"})]})}),e.jsx("tbody",{children:n.map((t,a)=>e.jsxs("tr",{children:[e.jsx("td",{children:t.salesRepName}),e.jsx("td",{children:t.customerId}),e.jsx("td",{children:t.customerName}),e.jsx("td",{children:t.supplierName}),e.jsx("td",{children:t.itemSubcategory}),e.jsx("td",{children:t.salesMgmtUnit}),e.jsx("td",{style:{textAlign:"right"},children:t.shareRate!=null?`${Number(t.shareRate).toFixed(2)}%`:""})]},a))})]})}),[n,o,l]);return e.jsxs("section",{style:{padding:8},children:[e.jsxs("div",{className:"page-title",style:{display:"flex",alignItems:"center",gap:8,justifyContent:"space-between"},children:[e.jsx("h2",{children:"수요조회"}),e.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:6,fontSize:12},children:["내거래처",e.jsx("input",{type:"checkbox",checked:c,onChange:t=>x(t.target.checked),style:{marginLeft:4}})]})]}),j]})}export{f as DemandList};
