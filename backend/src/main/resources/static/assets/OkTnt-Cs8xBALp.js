import{c as _,r as d,j as e,T as me,h as ct,d as De,U as Ce,m as Ee,v as pt}from"./index-BB_3LKiY.js";import{C as xt}from"./circle-check-big-56oz7VR7.js";import{R as ke}from"./refresh-cw-BZiQWki6.js";import{P as le}from"./plus-NPOo4Ump.js";import{T as Z}from"./trash-2-YQlpFIkM.js";import{S as Ne}from"./square-check-big-Blzmd46s.js";import{C as gt}from"./clock-DmAeCGI0.js";import{X as ce}from"./x-Ci4NTfDo.js";import{T as yt}from"./trending-down-BkmuUZtQ.js";import{D as ut}from"./dollar-sign-CDimaGAB.js";import{S as ht}from"./search-DWsQZhhE.js";import{U as bt}from"./user-C1JnWx0K.js";/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=[["line",{x1:"5",x2:"19",y1:"9",y2:"9",key:"1nwqeh"}],["line",{x1:"5",x2:"19",y1:"15",y2:"15",key:"g8yjpy"}]],vt=_("equal",ft);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],mt=_("hash",jt);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],pe=_("pen",kt);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],St=_("percent",Ct);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],ee=_("star",Tt);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],wt=_("user-minus",Rt);function Vt(){const[a,k]=d.useState("okr"),[g,A]=d.useState([]),[s,j]=d.useState(null),[c,I]=d.useState([]),[V,te]=d.useState(!1),[U,O]=d.useState(!1),[C,E]=d.useState(!1),[m,G]=d.useState(null),[M,xe]=d.useState(null),[f,re]=d.useState(null),[S,N]=d.useState({cycleName:"",cycleTypeCd:"QUARTER",startDate:"",endDate:"",statusCd:"PREPARING"}),[i,D]=d.useState({okrTypeCd:"O",okrTitle:"",okrDescription:"",targetValue:"",currentValue:"",unit:"PERCENT",targetDirection:"GTE"}),[Ae,Me]=d.useState([]),[W,L]=d.useState([]),[ne,Y]=d.useState(""),[Pe,H]=d.useState(!1),[Se,Le]=d.useState([]),[Fe,F]=d.useState(!1),[h,ge]=d.useState(null),[ye,oe]=d.useState(""),[Ke,J]=d.useState(!1),[b,Te]=d.useState(null),[v,Q]=d.useState({score:3,achievementRate:"",comment:"",evaluationTypeCd:"SELF"}),[$e,se]=d.useState(!1),[B,ie]=d.useState(null),[zt,_e]=d.useState([]),[Ve,It]=d.useState(null),[Ot,Et]=d.useState(null),[q,K]=d.useState(null),[T,Ue]=d.useState(null),[R,Re]=d.useState(null),u=localStorage.getItem("tnt.sales.assigneeId")||"",we=localStorage.getItem("tnt.sales.empName")||"";d.useEffect(()=>{be(),Ye()},[]),d.useEffect(()=>{s&&(w(s.id),fe(s.id),a==="approval"&&X())},[s,a]);function Ge(t){switch(t){case"PERCENT":return"%";case"AMOUNT":return"원";case"COUNT":return"개";case"BOOLEAN":return"";default:return t||""}}function ue(t,n=22){if(!t||t.length===0)return null;const r=[{bg:"#3b82f6",text:"white"},{bg:"#10b981",text:"white"},{bg:"#f59e0b",text:"white"},{bg:"#8b5cf6",text:"white"},{bg:"#ef4444",text:"white"},{bg:"#06b6d4",text:"white"},{bg:"#ec4899",text:"white"},{bg:"#84cc16",text:"white"}];return e.jsx("div",{style:{display:"flex",alignItems:"center"},children:e.jsx("div",{style:{display:"flex"},children:t.map((o,x)=>{var P;const l=((P=o.empName)==null?void 0:P.slice(-2))||"??",y=r[x%r.length];return e.jsx("div",{title:o.empName,style:{width:n,height:n,borderRadius:"50%",background:y.bg,color:y.text,fontSize:n*.4,fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",marginLeft:x>0?-n*.27:0,border:"2px solid white",boxShadow:"0 1px 2px rgba(0,0,0,0.1)"},children:l},x)})})})}function he(t,n,r=22){const o=(t==null?void 0:t.slice(-2))||(n==null?void 0:n.slice(0,2))||"??";return e.jsx("div",{title:t||n,style:{width:r,height:r,borderRadius:"50%",background:"#64748b",color:"white",fontSize:r*.4,fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",border:"2px solid white",boxShadow:"0 1px 2px rgba(0,0,0,0.1)"},children:o})}async function be(){te(!0);try{const t=await fetch("/api/v1/okr/cycles");if(t.ok){const n=await t.json();if(A(n),n.length>0&&!s){const r=n.find(o=>o.statusCd==="ACTIVE")||n[0];j(r)}}}catch(t){console.error("Failed to load cycles",t)}finally{te(!1)}}async function Ye(){try{const t=await fetch("/api/v1/employees?depts=all");if(t.ok){const n=await t.json();Me(n)}}catch(t){console.error("Failed to load employees",t)}}async function He(t){try{const n=await fetch(`/api/v1/okr/items/${t}/members`);if(n.ok){const r=await n.json();L(r.map(o=>({id:o.id,okrItemId:o.okrItemId,assigneeId:o.assigneeId,empName:o.empName,deptName:o.deptName,okrRoleCd:o.okrRoleCd||"CONTRIBUTOR"})))}}catch(n){console.error("Failed to load members",n)}}async function w(t){try{const n=await fetch(`/api/v1/okr/cycles/${t}/tree`);if(n.ok){const r=await n.json(),o=async l=>Promise.all(l.map(async y=>{try{const P=await fetch(`/api/v1/okr/items/${y.id}/members`);P.ok&&(y.members=await P.json())}catch{}return y.children&&y.children.length>0&&(y.children=await o(y.children)),y})),x=await o(r);I(x)}}catch(n){console.error("Failed to load OKR tree",n)}}async function fe(t){if(u)try{const n=await fetch(`/api/v1/okr/cycles/${t}/member-items?assigneeId=${u}`);if(n.ok){const o=(await n.json()).filter(l=>!l.parentOkrItemId),x=await Promise.all(o.map(async l=>{try{const y=await fetch(`/api/v1/okr/items/${l.id}/members`);if(y.ok){const P=await y.json();return{...l,members:P}}}catch{}return l}));_e(x)}}catch(n){console.error("Failed to load member items",n)}}async function Je(){try{const t={...S,id:m==null?void 0:m.id},n=m?`/api/v1/okr/cycles/${m.id}`:"/api/v1/okr/cycles";(await fetch(n,{method:m?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok&&(O(!1),G(null),N({cycleName:"",cycleTypeCd:"QUARTER",startDate:"",endDate:"",statusCd:"PREPARING"}),be())}catch(t){console.error("Failed to save cycle",t)}}function ae(t,n,r){ie({type:t,id:n,name:r}),se(!0)}async function Qe(){if(B)try{const t=B.type==="cycle"?`/api/v1/okr/cycles/${B.id}`:`/api/v1/okr/items/${B.id}`,n=await fetch(t,{method:"DELETE"});if(n.ok)se(!1),ie(null),B.type==="cycle"?be():s&&(w(s.id),fe(s.id));else{const r=await n.text();alert(r||"삭제 실패")}}catch(t){console.error("Failed to delete",t),alert("삭제에 실패했습니다.")}}async function ve(t,n){try{(await fetch(`/api/v1/okr/items/${t}/status`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({statusCd:n})})).ok&&s?(w(s.id),fe(s.id)):alert("상태 변경 실패")}catch(r){console.error("Failed to update status",r),alert("상태 변경에 실패했습니다.")}}async function qe(){if(!s){alert("사이클을 먼저 선택해주세요.");return}if(!i.okrTitle.trim()){alert("목표명을 입력해주세요.");return}try{const t={item:{id:M==null?void 0:M.id,okrCycleId:s.id,parentOkrItemId:(f==null?void 0:f.id)||null,ownerId:u||"system",okrTypeCd:i.okrTypeCd,okrTitle:i.okrTitle,okrDescription:i.okrDescription,targetValue:i.targetValue?parseFloat(i.targetValue):null,currentValue:i.currentValue?parseFloat(i.currentValue):null,unit:i.unit||null,targetDirection:i.targetDirection||null,statusCd:"DRAFT"},members:W.map(r=>({assigneeId:r.assigneeId,empName:r.empName,deptName:r.deptName,okrRoleCd:r.okrRoleCd}))},n=await fetch(M?`/api/v1/okr/items/${M.id}`:"/api/v1/okr/items",{method:M?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(n.ok)E(!1),xe(null),re(null),D({okrTypeCd:"O",okrTitle:"",okrDescription:"",targetValue:"",currentValue:"",unit:"PERCENT",targetDirection:"GTE"}),L([]),Y(""),w(s.id);else{const r=await n.json().catch(()=>({}));alert("저장 실패: "+(r.error||n.statusText))}}catch(t){console.error("Failed to save OKR",t),alert("저장 중 오류가 발생했습니다.")}}function Xe(t){G(t),N({cycleName:t.cycleName,cycleTypeCd:t.cycleTypeCd,startDate:t.startDate,endDate:t.endDate,statusCd:t.statusCd}),O(!0)}function je(t,n){xe(null);const r=t||Ve;re(r||null);let o="O";n?o=n:r&&(o=r.okrTypeCd==="O"?"KR":"IN"),D({okrTypeCd:o,okrTitle:"",okrDescription:"",targetValue:"",currentValue:"",unit:"PERCENT",targetDirection:"GTE"}),L([]),Y(""),H(!1),E(!0)}async function de(t){var n,r;if(xe(t),t.parentOkrItemId){const x=$(c).find(l=>l.id===t.parentOkrItemId);re(x||null)}else re(null);D({okrTypeCd:t.okrTypeCd,okrTitle:t.okrTitle,okrDescription:t.okrDescription||"",targetValue:((n=t.targetValue)==null?void 0:n.toString())||"",currentValue:((r=t.currentValue)==null?void 0:r.toString())||"",unit:t.unit||"PERCENT",targetDirection:t.targetDirection||"GTE"}),L([]),Y(""),H(!1),E(!0),await He(t.id)}function Ze(t){W.some(n=>n.assigneeId===t.assignee_id)||(L([...W,{assigneeId:t.assignee_id,empName:t.emp_name,deptName:t.dept_name,okrRoleCd:"CONTRIBUTOR"}]),Y(""),H(!1))}function et(t){L(W.filter(n=>n.assigneeId!==t))}const ze=Ae.filter(t=>{var n;return(t.emp_name.toLowerCase().includes(ne.toLowerCase())||((n=t.dept_name)==null?void 0:n.toLowerCase().includes(ne.toLowerCase())))&&!W.some(r=>r.assigneeId===t.assignee_id)}).slice(0,10);async function X(){if(s)try{const t=await fetch(`/api/v1/okr/cycles/${s.id}/pending-approvals`);if(t.ok){const n=await t.json();Le(n)}}catch(t){console.error("Failed to load pending approvals",t)}}async function tt(t){try{(await fetch(`/api/v1/okr/items/${t}/submit`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({approverId:u,comment:"승인 요청"})})).ok&&s&&(w(s.id),X())}catch(n){console.error("Failed to submit for approval",n)}}async function rt(){if(h)try{(await fetch(`/api/v1/okr/items/${h.id}/approve`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({approverId:u,comment:ye||"승인"})})).ok&&(F(!1),ge(null),oe(""),s&&(w(s.id),X()))}catch(t){console.error("Failed to approve",t)}}async function nt(){if(h)try{(await fetch(`/api/v1/okr/items/${h.id}/reject`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({approverId:u,comment:ye||"반려"})})).ok&&(F(!1),ge(null),oe(""),s&&(w(s.id),X()))}catch(t){console.error("Failed to reject",t)}}function ot(t){ge(t),oe(""),F(!0)}function Ie(t,n){Te(t),Q({score:3,achievementRate:"",comment:"",evaluationTypeCd:n}),J(!0)}async function st(){if(b)try{(await fetch(`/api/v1/okr/items/${b.id}/evaluations`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({evaluatorId:u,evaluationTypeCd:v.evaluationTypeCd,score:v.score,achievementRate:v.achievementRate?parseFloat(v.achievementRate):null,comment:v.comment})})).ok&&(J(!1),Te(null),Q({score:3,achievementRate:"",comment:"",evaluationTypeCd:"SELF"}))}catch(t){console.error("Failed to save evaluation",t)}}function $(t){const n=[];return t.forEach(r=>{n.push(r),r.children&&n.push(...$(r.children))}),n}const Oe=c.flatMap(t=>{const n=[];return["IN_PROGRESS","COMPLETED"].includes(t.statusCd)&&n.push(t),t.children&&n.push(...t.children.filter(r=>["IN_PROGRESS","COMPLETED"].includes(r.statusCd))),n}),p={PREPARING:"#f59e0b",ACTIVE:"#10b981",CLOSED:"#6b7280",DRAFT:"#94a3b8",NOT_STARTED:"#3b82f6",IN_PROGRESS:"#10b981",COMPLETED:"#8b5cf6"},z={PREPARING:"준비중",ACTIVE:"진행중",CLOSED:"종료",DRAFT:"초안",NOT_STARTED:"시작전",IN_PROGRESS:"진행중",COMPLETED:"완료"},it={QUARTER:"분기",HALF:"반기",YEAR:"연간"},at=c.length,dt=c.reduce((t,n)=>{var r;return t+(((r=n.children)==null?void 0:r.length)||0)},0),lt=c.length>0?Math.round(c.reduce((t,n)=>t+(n.progressRate||0),0)/c.length):0;return e.jsxs("div",{style:{padding:24,height:"100%",overflow:"auto",background:"var(--panel)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:24},children:[e.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:12},children:[e.jsx("h1",{style:{fontSize:24,fontWeight:600},children:"OKR TNT"}),e.jsx("p",{style:{fontSize:13,color:"var(--text-secondary)"},children:"OKR 목표 관리 시스템"})]}),we&&e.jsxs("div",{style:{fontSize:13,color:"var(--text-secondary)"},children:[we,"님 환영합니다"]})]}),e.jsx("div",{style:{display:"flex",gap:8,marginBottom:24,borderBottom:"1px solid var(--border)",paddingBottom:12},children:[{key:"dashboard",label:"대시보드",icon:me,disabled:!0},{key:"cycles",label:"사이클 관리",icon:ct,disabled:!1},{key:"okr",label:"OKR 관리",icon:xt,disabled:!1},{key:"okrtree",label:"Company OKR (Tree)",icon:De,disabled:!1},{key:"approval",label:"승인 관리",icon:Ce,disabled:!0},{key:"evaluation",label:"평가",icon:ee,disabled:!0}].map(t=>e.jsxs("button",{onClick:()=>!t.disabled&&k(t.key),disabled:t.disabled,style:{display:"flex",alignItems:"center",gap:6,padding:"8px 16px",borderRadius:6,background:a===t.key?"var(--primary)":"transparent",color:t.disabled?"#9ca3af":a===t.key?"#fff":"var(--text)",border:"none",cursor:t.disabled?"not-allowed":"pointer",fontSize:13,fontWeight:500,opacity:t.disabled?.6:1},children:[e.jsx(t.icon,{size:16}),t.label,t.disabled&&e.jsx("span",{style:{fontSize:10,marginLeft:2},children:"(준비중)"})]},t.key))}),a==="dashboard"&&e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:24},children:[e.jsx("label",{style:{fontSize:12,color:"var(--text-secondary)",marginBottom:6,display:"block"},children:"현재 사이클"}),e.jsx("select",{value:(s==null?void 0:s.id)||"",onChange:t=>{const n=g.find(r=>r.id===parseInt(t.target.value));n&&j(n)},style:{padding:"8px 12px",borderRadius:6,border:"1px solid var(--border)",background:"var(--bg)",color:"var(--text)",fontSize:14,minWidth:200},children:g.map(t=>e.jsx("option",{value:t.id,children:t.cycleName},t.id))})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:16,marginBottom:24},children:[e.jsxs("div",{style:{padding:20,background:"var(--bg)",borderRadius:12,border:"1px solid var(--border)"},children:[e.jsx("div",{style:{fontSize:12,color:"var(--text-secondary)",marginBottom:8},children:"목표(O)"}),e.jsx("div",{style:{fontSize:28,fontWeight:700,color:"var(--primary)"},children:at})]}),e.jsxs("div",{style:{padding:20,background:"var(--bg)",borderRadius:12,border:"1px solid var(--border)"},children:[e.jsx("div",{style:{fontSize:12,color:"var(--text-secondary)",marginBottom:8},children:"핵심결과(KR)"}),e.jsx("div",{style:{fontSize:28,fontWeight:700,color:"#10b981"},children:dt})]}),e.jsxs("div",{style:{padding:20,background:"var(--bg)",borderRadius:12,border:"1px solid var(--border)"},children:[e.jsx("div",{style:{fontSize:12,color:"var(--text-secondary)",marginBottom:8},children:"평균 달성률"}),e.jsxs("div",{style:{fontSize:28,fontWeight:700,color:"#8b5cf6"},children:[lt,"%"]})]}),e.jsxs("div",{style:{padding:20,background:"var(--bg)",borderRadius:12,border:"1px solid var(--border)"},children:[e.jsx("div",{style:{fontSize:12,color:"var(--text-secondary)",marginBottom:8},children:"사이클 상태"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{width:10,height:10,borderRadius:"50%",background:p[(s==null?void 0:s.statusCd)||"PREPARING"]}}),e.jsx("span",{style:{fontSize:16,fontWeight:600},children:z[(s==null?void 0:s.statusCd)||"PREPARING"]})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,marginBottom:24},children:[e.jsxs("div",{style:{background:"var(--bg)",borderRadius:12,border:"1px solid var(--border)",padding:20},children:[e.jsx("h3",{style:{fontSize:16,fontWeight:600,marginBottom:16},children:"상태별 분포"}),(()=>{const t=$(c),n={};t.forEach(o=>{n[o.statusCd]=(n[o.statusCd]||0)+1});const r=t.length||1;return e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:12},children:Object.entries(z).map(([o,x])=>{const l=n[o]||0,y=Math.round(l/r*100);return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:4},children:[e.jsxs("span",{style:{fontSize:13,display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{width:8,height:8,borderRadius:"50%",background:p[o]}}),x]}),e.jsxs("span",{style:{fontSize:13,fontWeight:500},children:[l,"개 (",y,"%)"]})]}),e.jsx("div",{style:{height:6,background:"var(--border)",borderRadius:3,overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",width:`${y}%`,background:p[o],borderRadius:3}})})]},o)})})})()]}),e.jsxs("div",{style:{background:"var(--bg)",borderRadius:12,border:"1px solid var(--border)",padding:20},children:[e.jsx("h3",{style:{fontSize:16,fontWeight:600,marginBottom:16},children:"내 OKR"}),(()=>{const n=$(c).filter(r=>r.ownerId===u);return n.length===0?e.jsx("div",{style:{textAlign:"center",padding:20,color:"var(--text-secondary)",fontSize:13},children:"담당 OKR이 없습니다."}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:10,maxHeight:250,overflow:"auto"},children:n.map(r=>e.jsxs("div",{style:{padding:12,background:"var(--panel)",borderRadius:8,border:"1px solid var(--border)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:6},children:[e.jsx("span",{style:{padding:"2px 6px",borderRadius:4,fontSize:10,fontWeight:600,background:r.okrTypeCd==="O"?"#3b82f620":"#10b98120",color:r.okrTypeCd==="O"?"#3b82f6":"#10b981"},children:r.okrTypeCd}),e.jsx("span",{style:{fontSize:13,fontWeight:500},children:r.okrTitle})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{flex:1,height:4,background:"var(--border)",borderRadius:2,overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",width:`${r.progressRate||0}%`,background:"#8b5cf6",borderRadius:2}})}),e.jsxs("span",{style:{fontSize:11,color:"var(--text-secondary)"},children:[r.progressRate||0,"%"]})]})]},r.id))})})()]})]}),e.jsxs("div",{style:{background:"var(--bg)",borderRadius:12,border:"1px solid var(--border)",padding:20},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:16},children:[e.jsx("h3",{style:{fontSize:16,fontWeight:600},children:"전체 OKR 현황"}),e.jsx("button",{onClick:()=>s&&w(s.id),style:{padding:6,background:"transparent",border:"none",cursor:"pointer",color:"var(--text-secondary)"},children:e.jsx(ke,{size:16})})]}),c.length===0?e.jsx("div",{style:{textAlign:"center",padding:40,color:"var(--text-secondary)"},children:"등록된 OKR이 없습니다. OKR 관리 탭에서 목표를 추가해주세요."}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:12},children:c.map(t=>e.jsx(We,{item:t,level:0,statusColors:p,statusLabels:z},t.id))})]})]}),a==="cycles"&&e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[e.jsx("h2",{style:{fontSize:18,fontWeight:600},children:"사이클 목록"}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>{G(null),N({cycleName:"",cycleTypeCd:"QUARTER",startDate:"",endDate:"",statusCd:"PREPARING"}),O(!0)},style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx(le,{size:16})," 사이클 추가"]})]}),e.jsx("div",{style:{background:"var(--bg)",borderRadius:12,border:"1px solid var(--border)",overflow:"hidden"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"var(--bg-secondary)"},children:[e.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:13,fontWeight:600,borderBottom:"1px solid var(--border)"},children:"사이클명"}),e.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:13,fontWeight:600,borderBottom:"1px solid var(--border)"},children:"유형"}),e.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:13,fontWeight:600,borderBottom:"1px solid var(--border)"},children:"기간"}),e.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:13,fontWeight:600,borderBottom:"1px solid var(--border)"},children:"상태"}),e.jsx("th",{style:{padding:"12px 16px",textAlign:"center",fontSize:13,fontWeight:600,borderBottom:"1px solid var(--border)",width:100},children:"관리"})]})}),e.jsxs("tbody",{children:[g.map(t=>e.jsxs("tr",{style:{borderBottom:"1px solid var(--border)"},children:[e.jsx("td",{style:{padding:"12px 16px",fontSize:14},children:t.cycleName}),e.jsx("td",{style:{padding:"12px 16px",fontSize:14},children:it[t.cycleTypeCd]||t.cycleTypeCd}),e.jsxs("td",{style:{padding:"12px 16px",fontSize:14},children:[t.startDate," ~ ",t.endDate]}),e.jsx("td",{style:{padding:"12px 16px"},children:e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:6,padding:"4px 10px",borderRadius:12,fontSize:12,background:`${p[t.statusCd]}20`,color:p[t.statusCd]},children:[e.jsx("span",{style:{width:6,height:6,borderRadius:"50%",background:p[t.statusCd]}}),z[t.statusCd]]})}),e.jsxs("td",{style:{padding:"12px 16px",textAlign:"center"},children:[e.jsx("button",{onClick:()=>Xe(t),style:{padding:6,background:"transparent",border:"none",cursor:"pointer",color:"var(--text-secondary)"},title:"수정",children:e.jsx(pe,{size:16})}),e.jsx("button",{onClick:()=>ae("cycle",t.id,t.cycleName),style:{padding:6,background:"transparent",border:"none",cursor:"pointer",color:"#ef4444"},title:"삭제",children:e.jsx(Z,{size:16})})]})]},t.id)),g.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:5,style:{padding:40,textAlign:"center",color:"var(--text-secondary)"},children:"등록된 사이클이 없습니다."})})]})]})})]}),a==="okr"&&e.jsxs("div",{children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("h2",{style:{fontSize:18,fontWeight:600},children:"OKR 관리"}),e.jsx("select",{value:(s==null?void 0:s.id)||"",onChange:t=>{const n=g.find(r=>r.id===parseInt(t.target.value));n&&j(n)},style:{padding:"6px 10px",borderRadius:6,border:"1px solid var(--border)",background:"var(--bg)",color:"var(--text)",fontSize:13},children:g.map(t=>e.jsx("option",{value:t.id,children:t.cycleName},t.id))})]})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:16},children:[e.jsxs("div",{style:{background:"linear-gradient(180deg, #f8fafc 0%, #f1f5f9 100%)",borderRadius:12,border:"1px solid #e2e8f0",padding:16,maxHeight:"calc(100vh - 280px)",overflowY:"auto"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:12},children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:600,color:"#64748b",display:"flex",alignItems:"center",gap:6},children:[e.jsx(me,{size:14,style:{color:"#3b82f6"}}),"목표 (Objectives)"]}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>je(void 0,"O"),style:{display:"inline-flex",alignItems:"center",justifyContent:"center",gap:3,padding:"4px 10px",fontSize:10,fontWeight:600,minWidth:70,background:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",border:"none",borderRadius:12,color:"#fff",boxShadow:"0 2px 4px rgba(59, 130, 246, 0.3)",transition:"all 0.2s ease"},onMouseOver:t=>{t.currentTarget.style.transform="translateY(-1px)",t.currentTarget.style.boxShadow="0 3px 8px rgba(59, 130, 246, 0.4)"},onMouseOut:t=>{t.currentTarget.style.transform="translateY(0)",t.currentTarget.style.boxShadow="0 2px 4px rgba(59, 130, 246, 0.3)"},children:[e.jsx(le,{size:10})," 목표 추가"]})]}),c.length===0?e.jsx("div",{style:{textAlign:"center",padding:20,color:"#94a3b8",fontSize:12},children:"등록된 목표가 없습니다."}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:c.map(t=>{const n=t.ownerId===u;return e.jsxs("div",{style:{padding:10,background:(T==null?void 0:T.id)===t.id?"#dbeafe":"white",borderRadius:8,border:(T==null?void 0:T.id)===t.id?"2px solid #3b82f6":"1px solid #e2e8f0",cursor:"pointer",transition:"all 0.2s ease"},onClick:()=>{Ue((T==null?void 0:T.id)===t.id?null:t),Re(null)},onMouseEnter:r=>{if(t.okrDescription){const o=r.currentTarget.getBoundingClientRect();K({x:o.right+10,y:o.top,title:t.okrTitle,description:t.okrDescription})}},onMouseLeave:()=>K(null),children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,marginBottom:4},children:[e.jsx("span",{style:{padding:"1px 6px",borderRadius:3,fontSize:10,fontWeight:600,background:"#3b82f620",color:"#3b82f6"},children:"O"}),e.jsx("span",{style:{fontWeight:500,fontSize:12,color:"#334155",flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.okrTitle})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:6},children:[he(t.ownerName,t.ownerId,20),t.members&&t.members.length>0&&e.jsx("div",{children:ue(t.members,20)})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:8},children:[e.jsxs("button",{onClick:()=>je(t,"KR"),style:{padding:"4px 10px",fontSize:10,fontWeight:600,minWidth:70,background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",border:"none",borderRadius:12,cursor:"pointer",color:"#fff",display:"inline-flex",alignItems:"center",justifyContent:"center",gap:3,boxShadow:"0 2px 4px rgba(16, 185, 129, 0.3)",transition:"all 0.2s ease"},onMouseOver:r=>{r.currentTarget.style.transform="translateY(-1px)",r.currentTarget.style.boxShadow="0 3px 8px rgba(16, 185, 129, 0.4)"},onMouseOut:r=>{r.currentTarget.style.transform="translateY(0)",r.currentTarget.style.boxShadow="0 2px 4px rgba(16, 185, 129, 0.3)"},children:[e.jsx(le,{size:10})," KR 추가"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[n?e.jsxs("select",{value:t.statusCd,onChange:r=>ve(t.id,r.target.value),style:{padding:"2px 6px",borderRadius:10,fontSize:9,background:`${p[t.statusCd]}15`,color:p[t.statusCd],border:`1px solid ${p[t.statusCd]}30`,cursor:"pointer",fontWeight:600,outline:"none"},children:[e.jsx("option",{value:"DRAFT",children:"초안"}),e.jsx("option",{value:"IN_PROGRESS",children:"진행중"}),e.jsx("option",{value:"COMPLETED",children:"완료"})]}):e.jsx("span",{style:{padding:"2px 8px",borderRadius:10,fontSize:9,fontWeight:500,background:`${p[t.statusCd]}15`,color:p[t.statusCd]},children:z[t.statusCd]}),e.jsx("button",{onClick:()=>n&&de(t),disabled:!n,style:{padding:2,background:"transparent",border:"none",cursor:n?"pointer":"not-allowed",color:n?"var(--text-secondary)":"#d1d5db",opacity:n?1:.5},title:n?"수정":"소유자만 수정 가능",children:e.jsx(pe,{size:12})}),e.jsx("button",{onClick:()=>n&&ae("okr",t.id,t.okrTitle),disabled:!n,style:{padding:2,background:"transparent",border:"none",cursor:n?"pointer":"not-allowed",color:n?"#ef4444":"#fca5a5",opacity:n?1:.5},title:n?"삭제":"소유자만 삭제 가능",children:e.jsx(Z,{size:12})})]})]})]},t.id)})})]}),(()=>{const t=$(c),n=t.filter(r=>{var o;return r.okrTypeCd==="KR"&&(r.ownerId===u||((o=r.members)==null?void 0:o.some(x=>x.assigneeId===u)))&&(T?r.parentOkrItemId===T.id:!0)});return e.jsxs("div",{style:{background:"linear-gradient(180deg, #ecfdf5 0%, #d1fae5 100%)",borderRadius:12,border:"1px solid #a7f3d0",padding:20,maxHeight:"calc(100vh - 280px)",overflowY:"auto"},children:[e.jsx("div",{style:{marginBottom:16},children:e.jsxs("h3",{style:{fontSize:14,fontWeight:600,color:"#047857",display:"flex",alignItems:"center",gap:6},children:[e.jsx(Ee,{size:14,style:{color:"#10b981"}}),"핵심결과 (Key Results)"]})}),n.length===0?e.jsx("div",{style:{textAlign:"center",padding:30,color:"#6b7280",fontSize:13},children:"내가 담당하는 핵심결과가 없습니다."}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:12},children:n.map(r=>{const o=r.ownerId===u,x=t.find(l=>l.id===r.parentOkrItemId);return e.jsxs("div",{style:{padding:10,background:(R==null?void 0:R.id)===r.id?"#d1fae5":"white",borderRadius:8,border:(R==null?void 0:R.id)===r.id?"2px solid #10b981":"1px solid #a7f3d0",cursor:"pointer",transition:"all 0.2s ease"},onClick:()=>Re((R==null?void 0:R.id)===r.id?null:r),onMouseEnter:l=>{if(r.okrDescription){const y=l.currentTarget.getBoundingClientRect();K({x:y.left,y:y.bottom+10,title:r.okrTitle,description:r.okrDescription})}},onMouseLeave:()=>K(null),children:[x&&e.jsxs("div",{style:{fontSize:10,color:"#6b7280",marginBottom:4,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[e.jsx("span",{style:{color:"#3b82f6",fontWeight:600},children:"O"})," ",x.okrTitle]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,marginBottom:4},children:[e.jsx("span",{style:{padding:"1px 6px",borderRadius:3,fontSize:10,fontWeight:600,background:"#10b98120",color:"#10b981"},children:"KR"}),e.jsx("span",{style:{fontWeight:500,fontSize:12,color:"#334155",flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:r.okrTitle})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:6},children:[he(r.ownerName,r.ownerId,20),r.members&&r.members.length>0&&e.jsx("div",{children:ue(r.members,20)})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:8},children:[e.jsxs("button",{onClick:()=>je(r,"IN"),style:{padding:"4px 10px",fontSize:10,fontWeight:600,minWidth:70,background:"linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)",border:"none",borderRadius:12,cursor:"pointer",color:"#fff",display:"inline-flex",alignItems:"center",justifyContent:"center",gap:3,boxShadow:"0 2px 4px rgba(139, 92, 246, 0.3)",transition:"all 0.2s ease"},onMouseOver:l=>{l.currentTarget.style.transform="translateY(-1px)",l.currentTarget.style.boxShadow="0 3px 8px rgba(139, 92, 246, 0.4)"},onMouseOut:l=>{l.currentTarget.style.transform="translateY(0)",l.currentTarget.style.boxShadow="0 2px 4px rgba(139, 92, 246, 0.3)"},children:[e.jsx(le,{size:10})," 과제 추가"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[o?e.jsxs("select",{value:r.statusCd,onChange:l=>ve(r.id,l.target.value),style:{padding:"2px 6px",borderRadius:10,fontSize:9,background:`${p[r.statusCd]}15`,color:p[r.statusCd],border:`1px solid ${p[r.statusCd]}30`,cursor:"pointer",fontWeight:600,outline:"none"},children:[e.jsx("option",{value:"DRAFT",children:"초안"}),e.jsx("option",{value:"IN_PROGRESS",children:"진행중"}),e.jsx("option",{value:"COMPLETED",children:"완료"})]}):e.jsx("span",{style:{padding:"2px 8px",borderRadius:10,fontSize:9,fontWeight:500,background:`${p[r.statusCd]}15`,color:p[r.statusCd]},children:z[r.statusCd]}),e.jsx("button",{onClick:()=>o&&de(r),disabled:!o,style:{padding:2,background:"transparent",border:"none",cursor:o?"pointer":"not-allowed",color:o?"var(--text-secondary)":"#d1d5db",opacity:o?1:.5},title:o?"수정":"소유자만 수정 가능",children:e.jsx(pe,{size:12})}),e.jsx("button",{onClick:()=>o&&ae("okr",r.id,r.okrTitle),disabled:!o,style:{padding:2,background:"transparent",border:"none",cursor:o?"pointer":"not-allowed",color:o?"#ef4444":"#fca5a5",opacity:o?1:.5},title:o?"삭제":"소유자만 삭제 가능",children:e.jsx(Z,{size:12})})]})]})]},r.id)})})]})})(),(()=>{const n=$(c).filter(r=>{var o;return r.okrTypeCd==="IN"&&(r.ownerId===u||((o=r.members)==null?void 0:o.some(x=>x.assigneeId===u)))&&(R?r.parentOkrItemId===R.id:!0)});return e.jsxs("div",{style:{background:"linear-gradient(180deg, #f5f3ff 0%, #ede9fe 100%)",borderRadius:12,border:"1px solid #ddd6fe",padding:16,maxHeight:"calc(100vh - 280px)",overflowY:"auto"},children:[e.jsx("div",{style:{marginBottom:12},children:e.jsxs("h3",{style:{fontSize:13,fontWeight:600,color:"#6d28d9",display:"flex",alignItems:"center",gap:6},children:[e.jsx(Ne,{size:14,style:{color:"#8b5cf6"}}),"실행과제 (Initiatives)"]})}),n.length===0?e.jsx("div",{style:{textAlign:"center",padding:20,color:"#94a3b8",fontSize:12},children:"내가 담당하는 실행과제가 없습니다."}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:n.map(r=>{const o=r.ownerId===u;return e.jsxs("div",{style:{padding:10,background:"white",borderRadius:8,border:"1px solid #ddd6fe",cursor:r.okrDescription?"pointer":"default"},onMouseEnter:x=>{if(r.okrDescription){const l=x.currentTarget.getBoundingClientRect();K({x:l.left-200,y:l.top,title:r.okrTitle,description:r.okrDescription})}},onMouseLeave:()=>K(null),children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,marginBottom:4},children:[e.jsx("span",{style:{padding:"1px 6px",borderRadius:3,fontSize:10,fontWeight:600,background:"#8b5cf620",color:"#8b5cf6"},children:"IN"}),e.jsx("span",{style:{fontWeight:500,fontSize:12,color:"#334155",flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:r.okrTitle})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:6},children:[he(r.ownerName,r.ownerId,18),r.members&&r.members.length>0&&e.jsx("div",{children:ue(r.members,18)})]}),e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end",marginTop:8},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[o?e.jsxs("select",{value:r.statusCd,onChange:x=>ve(r.id,x.target.value),style:{padding:"2px 6px",borderRadius:10,fontSize:9,background:`${p[r.statusCd]}15`,color:p[r.statusCd],border:`1px solid ${p[r.statusCd]}30`,cursor:"pointer",fontWeight:600,outline:"none"},children:[e.jsx("option",{value:"DRAFT",children:"초안"}),e.jsx("option",{value:"IN_PROGRESS",children:"진행중"}),e.jsx("option",{value:"COMPLETED",children:"완료"})]}):e.jsx("span",{style:{padding:"2px 8px",borderRadius:10,fontSize:9,fontWeight:500,background:`${p[r.statusCd]}15`,color:p[r.statusCd]},children:z[r.statusCd]}),e.jsx("button",{onClick:()=>o&&de(r),disabled:!o,style:{padding:2,background:"transparent",border:"none",cursor:o?"pointer":"not-allowed",color:o?"var(--text-secondary)":"#d1d5db",opacity:o?1:.5},title:o?"수정":"소유자만 수정 가능",children:e.jsx(pe,{size:12})}),e.jsx("button",{onClick:()=>o&&ae("okr",r.id,r.okrTitle),disabled:!o,style:{padding:2,background:"transparent",border:"none",cursor:o?"pointer":"not-allowed",color:o?"#ef4444":"#fca5a5",opacity:o?1:.5},title:o?"삭제":"소유자만 삭제 가능",children:e.jsx(Z,{size:12})})]})})]},r.id)})})]})})()]})]}),a==="okrtree"&&e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("h2",{style:{fontSize:18,fontWeight:600},children:"OKR Tree"}),e.jsx("select",{value:(s==null?void 0:s.id)||"",onChange:t=>{const n=g.find(r=>r.id===parseInt(t.target.value));n&&j(n)},style:{padding:"6px 10px",borderRadius:6,border:"1px solid var(--border)",background:"var(--bg)",color:"var(--text)",fontSize:13},children:g.map(t=>e.jsx("option",{value:t.id,children:t.cycleName},t.id))})]}),e.jsx("button",{onClick:()=>s&&w(s.id),style:{padding:6,background:"transparent",border:"none",cursor:"pointer",color:"var(--text-secondary)"},children:e.jsx(ke,{size:16})})]}),e.jsx("div",{style:{background:"var(--panel)",borderRadius:12,border:"1px solid var(--border)",padding:20},children:c.length===0?e.jsx("div",{style:{textAlign:"center",padding:40,color:"var(--text-secondary)"},children:"등록된 OKR이 없습니다."}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:c.map(t=>e.jsx(Be,{item:t,level:0,onEdit:de,loggedInAssigneeId:u},t.id))})})]}),a==="approval"&&e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("h2",{style:{fontSize:18,fontWeight:600},children:"승인 대기 목록"}),e.jsx("select",{value:(s==null?void 0:s.id)||"",onChange:t=>{const n=g.find(r=>r.id===parseInt(t.target.value));n&&j(n)},style:{padding:"6px 10px",borderRadius:6,border:"1px solid var(--border)",background:"var(--bg)",color:"var(--text)",fontSize:13},children:g.map(t=>e.jsx("option",{value:t.id,children:t.cycleName},t.id))})]}),e.jsx("button",{onClick:X,style:{padding:8,background:"transparent",border:"none",cursor:"pointer",color:"var(--text-secondary)"},children:e.jsx(ke,{size:16})})]}),e.jsxs("div",{style:{marginBottom:24},children:[e.jsx("h3",{style:{fontSize:14,fontWeight:600,marginBottom:12,color:"var(--text-secondary)"},children:"내 초안 OKR (승인 요청 가능)"}),e.jsx("div",{style:{background:"var(--bg)",borderRadius:12,border:"1px solid var(--border)",overflow:"hidden"},children:c.filter(t=>t.statusCd==="DRAFT"&&t.ownerId===u).length===0?e.jsx("div",{style:{padding:24,textAlign:"center",color:"var(--text-secondary)"},children:"승인 요청 가능한 초안 OKR이 없습니다."}):c.filter(t=>t.statusCd==="DRAFT"&&t.ownerId===u).map(t=>e.jsxs("div",{style:{padding:"12px 16px",borderBottom:"1px solid var(--border)",display:"flex",alignItems:"center",gap:12},children:[e.jsx("span",{style:{padding:"2px 8px",borderRadius:4,fontSize:11,fontWeight:600,background:"#3b82f620",color:"#3b82f6"},children:"O"}),e.jsx("span",{style:{flex:1,fontWeight:500},children:t.okrTitle}),e.jsx("span",{style:{padding:"2px 8px",borderRadius:10,fontSize:11,background:`${p[t.statusCd]}20`,color:p[t.statusCd]},children:z[t.statusCd]}),e.jsx("button",{onClick:()=>tt(t.id),className:"btn btn-primary",style:{padding:"6px 12px",fontSize:12},children:"승인 요청"})]},t.id))})]}),e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:14,fontWeight:600,marginBottom:12,color:"var(--text-secondary)"},children:"승인 대기 중인 OKR"}),e.jsx("div",{style:{background:"var(--bg)",borderRadius:12,border:"1px solid var(--border)",overflow:"hidden"},children:Se.length===0?e.jsxs("div",{style:{padding:24,textAlign:"center",color:"var(--text-secondary)"},children:[e.jsx(gt,{size:32,style:{marginBottom:8,opacity:.5}}),e.jsx("p",{children:"승인 대기 중인 OKR이 없습니다."})]}):Se.map(t=>e.jsxs("div",{style:{padding:"12px 16px",borderBottom:"1px solid var(--border)",display:"flex",alignItems:"center",gap:12},children:[e.jsx("span",{style:{padding:"2px 8px",borderRadius:4,fontSize:11,fontWeight:600,background:t.okrTypeCd==="O"?"#3b82f620":"#10b98120",color:t.okrTypeCd==="O"?"#3b82f6":"#10b981"},children:t.okrTypeCd}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:500},children:t.okrTitle}),e.jsxs("div",{style:{fontSize:12,color:"var(--text-secondary)"},children:["작성자: ",t.ownerName||t.ownerId]})]}),e.jsx("span",{style:{padding:"2px 8px",borderRadius:10,fontSize:11,background:"#f59e0b20",color:"#f59e0b"},children:"승인대기"}),e.jsx("button",{onClick:()=>ot(t),className:"btn btn-secondary",style:{padding:"6px 12px",fontSize:12},children:"검토"})]},t.id))})]})]}),a==="evaluation"&&e.jsxs("div",{children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("h2",{style:{fontSize:18,fontWeight:600},children:"OKR 평가"}),e.jsx("select",{value:(s==null?void 0:s.id)||"",onChange:t=>{const n=g.find(r=>r.id===parseInt(t.target.value));n&&j(n)},style:{padding:"6px 10px",borderRadius:6,border:"1px solid var(--border)",background:"var(--bg)",color:"var(--text)",fontSize:13},children:g.map(t=>e.jsx("option",{value:t.id,children:t.cycleName},t.id))})]})}),e.jsx("div",{style:{background:"var(--bg)",borderRadius:12,border:"1px solid var(--border)",overflow:"hidden"},children:Oe.length===0?e.jsxs("div",{style:{padding:40,textAlign:"center",color:"var(--text-secondary)"},children:[e.jsx(ee,{size:32,style:{marginBottom:8,opacity:.5}}),e.jsx("p",{children:"평가 가능한 OKR이 없습니다."}),e.jsx("p",{style:{fontSize:12,marginTop:4},children:"진행중 또는 완료된 OKR만 평가할 수 있습니다."})]}):Oe.map(t=>e.jsxs("div",{style:{padding:"16px",borderBottom:"1px solid var(--border)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:12},children:[e.jsx("span",{style:{padding:"2px 8px",borderRadius:4,fontSize:11,fontWeight:600,background:t.okrTypeCd==="O"?"#3b82f620":"#10b98120",color:t.okrTypeCd==="O"?"#3b82f6":"#10b981"},children:t.okrTypeCd}),e.jsx("span",{style:{flex:1,fontWeight:500},children:t.okrTitle}),e.jsx("span",{style:{padding:"2px 8px",borderRadius:10,fontSize:11,background:`${p[t.statusCd]}20`,color:p[t.statusCd]},children:z[t.statusCd]})]}),t.okrTypeCd==="KR"&&t.targetValue&&e.jsxs("div",{style:{marginBottom:12,display:"flex",alignItems:"center",gap:12},children:[e.jsxs("span",{style:{fontSize:12,color:"var(--text-secondary)"},children:["진행률: ",t.currentValue||0," / ",t.targetValue," ",Ge(t.unit)]}),e.jsx("div",{style:{flex:1,maxWidth:150,height:6,background:"var(--border)",borderRadius:3,overflow:"hidden"},children:e.jsx("div",{style:{width:`${Math.min(t.progressRate||0,100)}%`,height:"100%",background:"#10b981",borderRadius:3}})}),e.jsxs("span",{style:{fontSize:12,fontWeight:600,color:"#10b981"},children:[t.progressRate||0,"%"]})]}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsxs("button",{onClick:()=>Ie(t,"SELF"),className:"btn btn-secondary",style:{padding:"6px 12px",fontSize:12,display:"flex",alignItems:"center",gap:4},children:[e.jsx(ee,{size:14}),"자기 평가"]}),e.jsxs("button",{onClick:()=>Ie(t,"MANAGER"),className:"btn btn-secondary",style:{padding:"6px 12px",fontSize:12,display:"flex",alignItems:"center",gap:4},children:[e.jsx(ee,{size:14}),"상사 평가"]})]})]},t.id))})]}),U&&e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:100},onClick:()=>O(!1),children:e.jsxs("div",{style:{background:"var(--panel)",borderRadius:12,padding:24,minWidth:400,maxWidth:"90vw",border:"1px solid var(--border)"},onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},children:[e.jsx("h3",{style:{fontSize:18,fontWeight:600},children:m?"사이클 수정":"사이클 추가"}),e.jsx("button",{onClick:()=>O(!1),style:{background:"transparent",border:"none",cursor:"pointer",color:"var(--text-secondary)"},children:e.jsx(ce,{size:20})})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:12,color:"var(--text-secondary)",marginBottom:6,display:"block"},children:"사이클명 *"}),e.jsx("input",{type:"text",value:S.cycleName,onChange:t=>N({...S,cycleName:t.target.value}),placeholder:"예: 2025 Q1",style:{width:"100%",padding:"10px 12px",borderRadius:6,border:"1px solid var(--border)",background:"white",color:"var(--text)",fontSize:14}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:12,color:"var(--text-secondary)",marginBottom:6,display:"block"},children:"유형"}),e.jsxs("select",{value:S.cycleTypeCd,onChange:t=>N({...S,cycleTypeCd:t.target.value}),style:{width:"100%",padding:"10px 12px",borderRadius:6,border:"1px solid var(--border)",background:"white",color:"var(--text)",fontSize:14},children:[e.jsx("option",{value:"QUARTER",children:"분기"}),e.jsx("option",{value:"HALF",children:"반기"}),e.jsx("option",{value:"YEAR",children:"연간"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:12,color:"var(--text-secondary)",marginBottom:6,display:"block"},children:"상태"}),e.jsxs("select",{value:S.statusCd,onChange:t=>N({...S,statusCd:t.target.value}),style:{width:"100%",padding:"10px 12px",borderRadius:6,border:"1px solid var(--border)",background:"white",color:"var(--text)",fontSize:14},children:[e.jsx("option",{value:"PREPARING",children:"준비중"}),e.jsx("option",{value:"ACTIVE",children:"진행중"}),e.jsx("option",{value:"CLOSED",children:"종료"})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:12,color:"var(--text-secondary)",marginBottom:6,display:"block"},children:"시작일 *"}),e.jsx("input",{type:"date",value:S.startDate,onChange:t=>N({...S,startDate:t.target.value}),style:{width:"100%",padding:"10px 12px",borderRadius:6,border:"1px solid var(--border)",background:"white",color:"var(--text)",fontSize:14}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:12,color:"var(--text-secondary)",marginBottom:6,display:"block"},children:"종료일 *"}),e.jsx("input",{type:"date",value:S.endDate,onChange:t=>N({...S,endDate:t.target.value}),style:{width:"100%",padding:"10px 12px",borderRadius:6,border:"1px solid var(--border)",background:"white",color:"var(--text)",fontSize:14}})]})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:8,marginTop:24},children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>O(!1),children:"취소"}),e.jsx("button",{className:"btn btn-primary",onClick:Je,children:"저장"})]})]})}),C&&(()=>{const t=M?i.okrTypeCd==="O"?"목표 수정":i.okrTypeCd==="KR"?"핵심결과 수정":"실행과제 수정":i.okrTypeCd==="IN"?"실행과제 (Initiative) 추가":i.okrTypeCd==="KR"?"핵심결과 (Key Result) 추가":"목표 (Objective) 추가",n=i.okrTypeCd==="O"?"#3b82f6":i.okrTypeCd==="KR"?"#10b981":"#8b5cf6";return e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:100},children:e.jsxs("div",{style:{background:"var(--panel)",borderRadius:12,padding:24,width:600,maxWidth:"90vw",border:"1px solid var(--border)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},children:[e.jsxs("h3",{style:{fontSize:18,fontWeight:600,display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{width:8,height:8,borderRadius:"50%",background:n}}),t]}),e.jsx("button",{onClick:()=>E(!1),style:{background:"transparent",border:"none",cursor:"pointer",color:"var(--text-secondary)"},children:e.jsx(ce,{size:20})})]}),e.jsxs("div",{style:{padding:12,background:f?"linear-gradient(135deg, #8b5cf615, #7c3aed15)":"#f8fafc",borderRadius:8,marginBottom:16,border:f?"2px solid #8b5cf6":"1px solid #e2e8f0"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx(me,{size:16,style:{color:f?"#8b5cf6":"#94a3b8"}}),e.jsx("span",{style:{fontSize:12,color:f?"#7c3aed":"#64748b",fontWeight:500},children:"상위 목표"})]}),f?e.jsxs("div",{style:{marginTop:6},children:[e.jsx("div",{style:{fontWeight:600,color:"#334155",fontSize:14},children:f.okrTitle}),e.jsxs("div",{style:{fontSize:11,color:"#64748b",marginTop:2},children:["담당: ",f.ownerName||f.ownerId]})]}):e.jsx("div",{style:{color:"#94a3b8",fontSize:12,marginTop:4},children:"최상위 목표로 생성됩니다"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:12,color:"var(--text-secondary)",marginBottom:6,display:"block"},children:"유형"}),e.jsx("div",{style:{width:"100%",padding:"10px 12px",borderRadius:6,border:"1px solid var(--border)",background:f?"#f1f5f9":"var(--bg)",color:f?"#64748b":"var(--text)",fontSize:14},children:i.okrTypeCd==="O"?"목표 (Objective)":i.okrTypeCd==="KR"?"핵심결과 (Key Result)":"실행과제 (Initiative)"})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{fontSize:12,color:"var(--text-secondary)",marginBottom:6,display:"block"},children:[i.okrTypeCd==="O"?"목표명":i.okrTypeCd==="KR"?"핵심결과명":"실행과제명"," *"]}),e.jsx("input",{type:"text",value:i.okrTitle,onChange:r=>D({...i,okrTitle:r.target.value}),placeholder:i.okrTypeCd==="O"?"예: 매출 20% 성장":i.okrTypeCd==="KR"?"예: 신규 고객 100명 확보":"예: 마케팅 캠페인 실행",style:{width:"100%",padding:"10px 12px",borderRadius:6,border:"1px solid var(--border)",background:"white",color:"var(--text)",fontSize:14}})]}),i.okrTypeCd==="KR"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:12,color:"var(--text-secondary)",marginBottom:8,display:"block"},children:"목표 방향"}),e.jsx("div",{style:{display:"flex",gap:8},children:[{value:"GTE",icon:e.jsx(Ee,{size:18}),label:"이상",desc:"목표값 이상 달성"},{value:"EQ",icon:e.jsx(vt,{size:18}),label:"동일",desc:"목표값과 동일"},{value:"LTE",icon:e.jsx(yt,{size:18}),label:"이하",desc:"목표값 이하 달성"}].map(r=>e.jsxs("button",{type:"button",onClick:()=>D({...i,targetDirection:r.value}),style:{flex:1,padding:"12px 8px",borderRadius:8,border:i.targetDirection===r.value?"2px solid #3b82f6":"1px solid var(--border)",background:i.targetDirection===r.value?"#3b82f610":"var(--bg)",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:4},children:[e.jsx("span",{style:{color:i.targetDirection===r.value?"#3b82f6":"var(--text-secondary)"},children:r.icon}),e.jsx("span",{style:{fontSize:13,fontWeight:600,color:i.targetDirection===r.value?"#3b82f6":"var(--text)"},children:r.label}),e.jsx("span",{style:{fontSize:10,color:"var(--text-secondary)"},children:r.desc})]},r.value))})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:12,color:"var(--text-secondary)",marginBottom:6,display:"block"},children:"목표값 *"}),e.jsx("input",{type:"number",value:i.targetValue,onChange:r=>D({...i,targetValue:r.target.value}),placeholder:"100",style:{width:"100%",padding:"10px 12px",borderRadius:6,border:"1px solid var(--border)",background:"white",color:"var(--text)",fontSize:14}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:12,color:"var(--text-secondary)",marginBottom:6,display:"block"},children:"측정단위 *"}),e.jsxs("select",{value:i.unit,onChange:r=>D({...i,unit:r.target.value}),style:{width:"100%",padding:"10px 12px",borderRadius:6,border:"1px solid var(--border)",background:"white",color:"var(--text)",fontSize:14},children:[e.jsx("option",{value:"PERCENT",children:"% (퍼센트)"}),e.jsx("option",{value:"AMOUNT",children:"금액 (원)"}),e.jsx("option",{value:"COUNT",children:"갯수 (개)"}),e.jsx("option",{value:"BOOLEAN",children:"완료여부"})]})]})]}),e.jsxs("div",{style:{padding:10,background:"var(--bg)",borderRadius:6,fontSize:13,display:"flex",alignItems:"center",gap:8},children:[i.unit==="PERCENT"&&e.jsx(St,{size:16,style:{color:"#10b981"}}),i.unit==="AMOUNT"&&e.jsx(ut,{size:16,style:{color:"#f59e0b"}}),i.unit==="COUNT"&&e.jsx(mt,{size:16,style:{color:"#3b82f6"}}),i.unit==="BOOLEAN"&&e.jsx(Ne,{size:16,style:{color:"#8b5cf6"}}),e.jsxs("span",{style:{color:"var(--text-secondary)"},children:[i.targetDirection==="GTE"?"≥":i.targetDirection==="LTE"?"≤":"="," ",i.targetValue||"0"," ",i.unit==="PERCENT"?"%":i.unit==="AMOUNT"?"원":i.unit==="COUNT"?"개":"(완료)"," ","달성 목표"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:12,color:"var(--text-secondary)",marginBottom:6,display:"block"},children:"목표 설명"}),e.jsx("textarea",{value:i.okrDescription,onChange:r=>D({...i,okrDescription:r.target.value}),rows:6,placeholder:"목표에 대한 상세 설명을 입력하세요...",style:{width:"100%",padding:"10px 12px",borderRadius:6,border:"1px solid var(--border)",background:"white",color:"var(--text)",fontSize:14,resize:"vertical"}})]}),e.jsxs("div",{style:{borderTop:"1px solid var(--border)",paddingTop:16,marginTop:8},children:[e.jsxs("label",{style:{fontSize:12,color:"var(--text-secondary)",marginBottom:8,display:"flex",alignItems:"center",gap:6},children:[e.jsx(pt,{size:14}),"담당자 지정"]}),e.jsxs("div",{style:{position:"relative",marginBottom:12},children:[e.jsxs("div",{style:{position:"relative"},children:[e.jsx(ht,{size:16,style:{position:"absolute",left:10,top:"50%",transform:"translateY(-50%)",color:"var(--text-secondary)"}}),e.jsx("input",{type:"text",value:ne,onChange:r=>{Y(r.target.value),H(r.target.value.length>0)},onFocus:()=>ne.length>0&&H(!0),placeholder:"이름 또는 부서로 검색...",style:{width:"100%",padding:"10px 12px 10px 34px",borderRadius:6,border:"1px solid var(--border)",background:"white",color:"var(--text)",fontSize:14}})]}),Pe&&ze.length>0&&e.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,zIndex:10,background:"var(--panel)",border:"1px solid var(--border)",borderRadius:6,boxShadow:"0 4px 12px rgba(0,0,0,0.15)",maxHeight:200,overflow:"auto",marginTop:4},children:ze.map(r=>e.jsxs("div",{onClick:()=>Ze(r),style:{padding:"10px 12px",cursor:"pointer",display:"flex",justifyContent:"space-between",borderBottom:"1px solid var(--border)"},onMouseEnter:o=>o.currentTarget.style.background="var(--bg-secondary)",onMouseLeave:o=>o.currentTarget.style.background="transparent",children:[e.jsx("span",{style:{fontWeight:500},children:r.emp_name}),e.jsx("span",{style:{fontSize:12,color:"var(--text-secondary)"},children:r.dept_name})]},r.assignee_id))})]}),W.length>0&&e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:W.map(r=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,padding:"8px 12px",background:"var(--bg-secondary)",borderRadius:6,border:"1px solid var(--border)"},children:[e.jsx(Ce,{size:16,style:{color:"var(--text-secondary)"}}),e.jsx("span",{style:{flex:1,fontWeight:500},children:r.empName}),e.jsx("span",{style:{fontSize:12,color:"var(--text-secondary)"},children:r.deptName}),e.jsx("button",{onClick:()=>et(r.assigneeId),style:{padding:4,background:"transparent",border:"none",cursor:"pointer",color:"#ef4444"},children:e.jsx(wt,{size:16})})]},r.assigneeId))}),W.length===0&&e.jsx("div",{style:{padding:16,textAlign:"center",color:"var(--text-secondary)",fontSize:13,background:"var(--bg)",borderRadius:6},children:"담당자를 검색하여 추가하세요"})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:8,marginTop:24},children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>E(!1),children:"취소"}),e.jsx("button",{className:"btn btn-primary",onClick:qe,children:"저장"})]})]})})})(),Fe&&h&&e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:100},onClick:()=>F(!1),children:e.jsxs("div",{style:{background:"var(--panel)",borderRadius:12,padding:24,minWidth:450,maxWidth:"90vw",border:"1px solid var(--border)"},onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},children:[e.jsx("h3",{style:{fontSize:18,fontWeight:600},children:"OKR 승인 검토"}),e.jsx("button",{onClick:()=>F(!1),style:{background:"transparent",border:"none",cursor:"pointer",color:"var(--text-secondary)"},children:e.jsx(ce,{size:20})})]}),e.jsxs("div",{style:{marginBottom:20,padding:16,background:"var(--bg)",borderRadius:8},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[e.jsx("span",{style:{padding:"2px 8px",borderRadius:4,fontSize:11,fontWeight:600,background:h.okrTypeCd==="O"?"#3b82f620":"#10b98120",color:h.okrTypeCd==="O"?"#3b82f6":"#10b981"},children:h.okrTypeCd==="O"?"목표":"핵심결과"}),e.jsx("span",{style:{fontWeight:600},children:h.okrTitle})]}),h.okrDescription&&e.jsx("p",{style:{fontSize:13,color:"var(--text-secondary)",marginBottom:8},children:h.okrDescription}),e.jsxs("div",{style:{fontSize:12,color:"var(--text-secondary)"},children:["작성자: ",h.ownerName||h.ownerId]}),h.okrTypeCd==="KR"&&h.targetValue&&e.jsxs("div",{style:{fontSize:12,color:"var(--text-secondary)",marginTop:4},children:["목표: ",h.targetValue," ",h.unit]})]}),e.jsxs("div",{style:{marginBottom:20},children:[e.jsx("label",{style:{fontSize:12,color:"var(--text-secondary)",marginBottom:6,display:"block"},children:"코멘트"}),e.jsx("textarea",{value:ye,onChange:t=>oe(t.target.value),placeholder:"승인/반려 사유를 입력하세요...",rows:3,style:{width:"100%",padding:"10px 12px",borderRadius:6,border:"1px solid var(--border)",background:"white",color:"var(--text)",fontSize:14,resize:"vertical"}})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:8},children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>F(!1),children:"취소"}),e.jsx("button",{onClick:nt,style:{padding:"8px 16px",borderRadius:6,border:"none",background:"#ef4444",color:"#fff",cursor:"pointer",fontWeight:500},children:"반려"}),e.jsx("button",{onClick:rt,style:{padding:"8px 16px",borderRadius:6,border:"none",background:"#10b981",color:"#fff",cursor:"pointer",fontWeight:500},children:"승인"})]})]})}),Ke&&b&&e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:100},onClick:()=>J(!1),children:e.jsxs("div",{style:{background:"var(--panel)",borderRadius:12,padding:24,minWidth:480,maxWidth:"90vw",border:"1px solid var(--border)"},onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},children:[e.jsx("h3",{style:{fontSize:18,fontWeight:600},children:v.evaluationTypeCd==="SELF"?"자기 평가":"상사 평가"}),e.jsx("button",{onClick:()=>J(!1),style:{background:"transparent",border:"none",cursor:"pointer",color:"var(--text-secondary)"},children:e.jsx(ce,{size:20})})]}),e.jsxs("div",{style:{marginBottom:20,padding:16,background:"var(--bg)",borderRadius:8},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[e.jsx("span",{style:{padding:"2px 8px",borderRadius:4,fontSize:11,fontWeight:600,background:b.okrTypeCd==="O"?"#3b82f620":"#10b98120",color:b.okrTypeCd==="O"?"#3b82f6":"#10b981"},children:b.okrTypeCd==="O"?"목표":"핵심결과"}),e.jsx("span",{style:{fontWeight:600},children:b.okrTitle})]}),b.okrDescription&&e.jsx("p",{style:{fontSize:13,color:"var(--text-secondary)",marginBottom:8},children:b.okrDescription}),b.okrTypeCd==="KR"&&b.targetValue&&e.jsxs("div",{style:{fontSize:12,color:"var(--text-secondary)"},children:["목표: ",b.currentValue||0," / ",b.targetValue," ",b.unit,"(",b.progressRate||0,"%)"]})]}),e.jsxs("div",{style:{marginBottom:20},children:[e.jsx("label",{style:{fontSize:12,color:"var(--text-secondary)",marginBottom:8,display:"block"},children:"평가 점수"}),e.jsx("div",{style:{display:"flex",gap:8},children:[1,2,3,4,5].map(t=>e.jsxs("button",{onClick:()=>Q(n=>({...n,score:t})),style:{flex:1,padding:"12px",borderRadius:8,border:v.score===t?"2px solid #f59e0b":"1px solid var(--border)",background:v.score===t?"#f59e0b20":"var(--bg)",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:4},children:[e.jsx(ee,{size:24,fill:v.score>=t?"#f59e0b":"transparent",color:v.score>=t?"#f59e0b":"var(--text-secondary)"}),e.jsxs("span",{style:{fontSize:12,fontWeight:v.score===t?600:400},children:[t,"점"]})]},t))})]}),e.jsxs("div",{style:{marginBottom:20},children:[e.jsx("label",{style:{fontSize:12,color:"var(--text-secondary)",marginBottom:6,display:"block"},children:"달성률 (%)"}),e.jsx("input",{type:"number",value:v.achievementRate,onChange:t=>Q(n=>({...n,achievementRate:t.target.value})),placeholder:"0 ~ 100",min:0,max:100,style:{width:"100%",padding:"10px 12px",borderRadius:6,border:"1px solid var(--border)",background:"white",color:"var(--text)",fontSize:14}})]}),e.jsxs("div",{style:{marginBottom:20},children:[e.jsx("label",{style:{fontSize:12,color:"var(--text-secondary)",marginBottom:6,display:"block"},children:"평가 의견"}),e.jsx("textarea",{value:v.comment,onChange:t=>Q(n=>({...n,comment:t.target.value})),placeholder:"평가 의견을 입력하세요...",rows:4,style:{width:"100%",padding:"10px 12px",borderRadius:6,border:"1px solid var(--border)",background:"white",color:"var(--text)",fontSize:14,resize:"vertical"}})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:8},children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>J(!1),children:"취소"}),e.jsx("button",{className:"btn btn-primary",onClick:st,style:{background:"#f59e0b"},children:"평가 저장"})]})]})}),$e&&B&&e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:()=>{se(!1),ie(null)},children:e.jsxs("div",{style:{background:"var(--panel)",borderRadius:12,padding:24,width:400,border:"1px solid var(--border)"},onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:16},children:[e.jsx("div",{style:{width:40,height:40,borderRadius:"50%",background:"#fef2f2",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Z,{size:20,style:{color:"#ef4444"}})}),e.jsx("h3",{style:{fontSize:18,fontWeight:600,color:"var(--text)"},children:B.type==="cycle"?"사이클 삭제":"OKR 삭제"})]}),e.jsx("p",{style:{fontSize:14,color:"var(--text-secondary)",marginBottom:8},children:"다음 항목을 삭제하시겠습니까?"}),e.jsx("p",{style:{fontSize:14,fontWeight:600,color:"var(--text)",padding:"12px 16px",background:"var(--bg)",borderRadius:8,marginBottom:16},children:B.name}),e.jsx("p",{style:{fontSize:12,color:"#ef4444",marginBottom:20},children:"이 작업은 되돌릴 수 없습니다."}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:8},children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>{se(!1),ie(null)},children:"취소"}),e.jsx("button",{className:"btn",onClick:Qe,style:{background:"#ef4444",color:"white",border:"none"},children:"삭제"})]})]})}),q&&e.jsxs("div",{style:{position:"fixed",left:q.x,top:q.y,background:"#fff",padding:"12px 16px",border:"1px solid #e5e7eb",borderRadius:8,fontSize:12,boxShadow:"0 4px 12px rgba(0,0,0,0.15)",pointerEvents:"none",zIndex:1e3,maxWidth:280,minWidth:180},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:8,color:"#1e293b",borderBottom:"1px solid #f1f5f9",paddingBottom:6},children:q.title}),e.jsx("div",{style:{color:"#475569",lineHeight:1.5,whiteSpace:"pre-wrap"},children:q.description})]})]})}function We({item:a,level:k,statusColors:g,statusLabels:A}){const[s,j]=d.useState(!0),c=a.children&&a.children.length>0,I=a.progressRate||0;return e.jsxs("div",{style:{marginLeft:k*24},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,padding:"12px 16px",background:k===0?"var(--bg-secondary)":"transparent",borderRadius:8,border:k===0?"1px solid var(--border)":"none"},children:[c&&e.jsx("button",{onClick:()=>j(!s),style:{background:"transparent",border:"none",cursor:"pointer",padding:0,color:"var(--text-secondary)"},children:e.jsx(De,{size:16,style:{transform:s?"rotate(90deg)":"none",transition:"transform 0.2s"}})}),!c&&e.jsx("div",{style:{width:16}}),e.jsx("span",{style:{padding:"2px 8px",borderRadius:4,fontSize:11,fontWeight:600,background:a.okrTypeCd==="O"?"#3b82f620":"#10b98120",color:a.okrTypeCd==="O"?"#3b82f6":"#10b981"},children:a.okrTypeCd}),e.jsx("span",{style:{flex:1,fontSize:14,fontWeight:k===0?600:400},children:a.okrTitle}),a.okrTypeCd==="KR"&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,minWidth:120},children:[e.jsx("div",{style:{flex:1,height:6,background:"var(--border)",borderRadius:3,overflow:"hidden"},children:e.jsx("div",{style:{width:`${Math.min(I,100)}%`,height:"100%",background:"#10b981",borderRadius:3}})}),e.jsxs("span",{style:{fontSize:12,fontWeight:600,color:"#10b981",minWidth:40,textAlign:"right"},children:[I,"%"]})]}),e.jsx("span",{style:{padding:"2px 8px",borderRadius:10,fontSize:11,background:`${g[a.statusCd]}20`,color:g[a.statusCd]},children:A[a.statusCd]})]}),s&&c&&e.jsx("div",{style:{marginTop:8},children:a.children.map(V=>e.jsx(We,{item:V,level:k+1,statusColors:g,statusLabels:A},V.id))})]})}function Be({item:a,level:k,onEdit:g,loggedInAssigneeId:A}){const s=a.children&&a.children.length>0,j=a.ownerId===A,c={O:{border:"var(--primary)",bg:"rgba(37, 99, 235, 0.1)",text:"var(--primary)"},KR:{border:"var(--success)",bg:"rgba(22, 163, 74, 0.1)",text:"var(--success)"},IN:{border:"#8b5cf6",bg:"rgba(139, 92, 246, 0.1)",text:"#8b5cf6"}},I=c[a.okrTypeCd]||c.O,V={DRAFT:"#94a3b8",IN_PROGRESS:"#10b981",COMPLETED:"#3b82f6",SUBMITTED:"#f59e0b",NOT_STARTED:"#6b7280"},te={DRAFT:"초안",IN_PROGRESS:"진행중",COMPLETED:"완료",SUBMITTED:"승인대기",NOT_STARTED:"시작전"},U=V[a.statusCd]||"#94a3b8",O=te[a.statusCd]||a.statusCd;return e.jsxs("div",{style:{marginBottom:8},children:[e.jsxs("div",{title:a.okrDescription||"",style:{marginLeft:k*24,display:"flex",alignItems:"center",gap:8,padding:"8px 12px",borderRadius:6,background:"var(--bg-secondary)",borderLeft:`4px solid ${I.border}`,cursor:j?"pointer":"default",transition:"background 0.2s"},onMouseEnter:C=>j&&(C.currentTarget.style.background="rgba(0,0,0,0.05)"),onMouseLeave:C=>C.currentTarget.style.background="var(--bg-secondary)",onClick:()=>j&&g(a),children:[e.jsx("span",{style:{padding:"2px 6px",borderRadius:4,fontSize:11,fontWeight:700,background:I.bg,color:I.text},children:a.okrTypeCd}),e.jsx("span",{style:{fontWeight:500,color:"var(--text-primary)",flex:1},children:a.okrTitle}),e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:4,padding:"3px 10px",borderRadius:16,fontSize:11,fontWeight:500,background:"#f1f5f9",color:"#475569",border:"1px solid #e2e8f0"},children:[e.jsx(bt,{size:12,style:{color:"#64748b"}}),e.jsx("span",{children:"소유자"}),e.jsx("span",{style:{fontWeight:600,color:"#334155"},children:a.ownerName||a.ownerId})]}),a.members&&a.members.length>0&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx(Ce,{size:12,style:{color:"#10b981"}}),e.jsx("span",{style:{fontSize:11,color:"#047857",fontWeight:500},children:"참여자"}),e.jsx("div",{style:{display:"flex",marginLeft:2},children:a.members.map((C,E)=>{const m=C.empName||C.assigneeId||"",G=m.length>1?m.slice(1):m;return e.jsx("div",{title:m,style:{width:24,height:24,borderRadius:"50%",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"#fff",fontSize:10,fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",border:"2px solid #fff",marginLeft:E>0?-8:0,boxShadow:"0 1px 3px rgba(0,0,0,0.15)"},children:G},E)})})]}),e.jsx("span",{style:{padding:"3px 10px",borderRadius:12,fontSize:10,fontWeight:600,background:`${U}18`,color:U,border:`1px solid ${U}30`},children:O})]}),s&&e.jsx("div",{style:{marginLeft:k*24+12,borderLeft:"1px solid var(--border)",paddingLeft:12,marginTop:8},children:a.children.map(C=>e.jsx(Be,{item:C,level:k+1,onEdit:g,loggedInAssigneeId:A},C.id))})]})}export{Vt as OkTnt};
