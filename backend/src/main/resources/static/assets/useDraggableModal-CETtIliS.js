import{r as n}from"./index-BB_3LKiY.js";const R="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3cline%20x1='18'%20y1='6'%20x2='6'%20y2='18'/%3e%3cline%20x1='6'%20y1='6'%20x2='18'%20y2='18'/%3e%3c/svg%3e";function k(a,i,w,s){const l=(s==null?void 0:s.persist)!==!1,M=(s==null?void 0:s.resetOnOpen)===!0,r=n.useRef(null),[o,g]=n.useState(()=>{if(!l)return null;try{const e=localStorage.getItem(`tnt.sales.modal.pos.${a}`);if(e)return JSON.parse(e)}catch{}return null}),f=n.useRef(o);n.useEffect(()=>{f.current=o},[o]);const[v,x]=n.useState(!1),u=n.useRef(null);n.useEffect(()=>{if(i&&r.current&&w)try{(M||!o)&&g(w(r.current))}catch{}},[i]),n.useEffect(()=>{if(!v)return;function e(c){if(!u.current||!r.current)return;const p=r.current.getBoundingClientRect(),b=p.width,D=p.height;let d=c.clientX-u.current.dx,m=c.clientY-u.current.dy;const L=Math.max(0,window.innerWidth-b),C=Math.max(0,window.innerHeight-D);d=Math.min(Math.max(0,d),L),m=Math.min(Math.max(0,m),C),g({x:d,y:m})}function t(){if(l&&f.current)try{localStorage.setItem(`tnt.sales.modal.pos.${a}`,JSON.stringify(f.current))}catch{}x(!1),u.current=null,window.removeEventListener("mousemove",e,!0),window.removeEventListener("mouseup",t,!0)}return window.addEventListener("mousemove",e,!0),window.addEventListener("mouseup",t,!0),()=>{window.removeEventListener("mousemove",e,!0),window.removeEventListener("mouseup",t,!0)}},[v,l,a]);function h(e){if(e.button!==0||!r.current)return;const t=r.current.getBoundingClientRect();u.current={dx:e.clientX-t.left,dy:e.clientY-t.top},x(!0),e.preventDefault()}function y(e){if(e.button!==0)return;const t=e.target,c=((t==null?void 0:t.tagName)||"").toLowerCase();["input","textarea","select","button","a","label"].includes(c)||h(e)}const E=o&&i?{position:"absolute",top:o.y,left:o.x,transform:"none"}:{position:"absolute",top:"10%",left:"50%",transform:"translateX(-50%)"};return{ref:r,style:E,bindHeader:{onMouseDown:h},bindContainer:{onMouseDown:y}}}export{R as c,k as u};
