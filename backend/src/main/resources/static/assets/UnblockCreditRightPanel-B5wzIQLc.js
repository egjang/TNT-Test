import{u as ve,j as e,r,F as ae,k as pe,h as we,m as ze,l as ke}from"./index-BB_3LKiY.js";import{M as ce}from"./message-square-DaNp9p04.js";import{X as L}from"./x-Ci4NTfDo.js";import{R as Ce}from"./refresh-cw-BZiQWki6.js";import{C as V}from"./chevron-down-DD_Bc6LT.js";import{C as X}from"./chevron-up-DTPmQPJn.js";import{P as ge}from"./plus-NPOo4Ump.js";import{D as Ie}from"./dollar-sign-CDimaGAB.js";import{C as _e}from"./circle-check-big-56oz7VR7.js";function G({message:n,type:p,onClose:f}){return r.useEffect(()=>{const g=setTimeout(f,3e3);return()=>clearTimeout(g)},[f]),e.jsxs("div",{style:{position:"fixed",top:20,left:"50%",transform:"translateX(-50%)",zIndex:2e3,animation:"slideDown 0.3s ease-out"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,padding:"14px 20px",background:p==="success"?"#10b981":"#ef4444",color:"white",borderRadius:10,boxShadow:"0 10px 25px rgba(0,0,0,0.2)",fontSize:14,fontWeight:600},children:[p==="success"?e.jsx(_e,{size:20}):e.jsx(pe,{size:20}),e.jsx("span",{children:n}),e.jsx("button",{onClick:f,style:{marginLeft:8,background:"rgba(255,255,255,0.2)",border:"none",borderRadius:"50%",width:22,height:22,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"white"},children:e.jsx(L,{size:12})})]}),e.jsx("style",{children:`
        @keyframes slideDown {
          from { opacity: 0; transform: translateX(-50%) translateY(-20px); }
          to { opacity: 1; transform: translateX(-50%) translateY(0); }
        }
      `})]})}function Re({isOpen:n,onClose:p,customerSeq:f,customerName:g,companyType:b,meetingId:W,avgSales3Month:B,onSubmit:S}){const[x,k]=r.useState(""),[C,I]=r.useState(""),[v,A]=r.useState(""),[m,_]=r.useState(!1),[h,u]=r.useState(null),w=async()=>{if(!x.trim()){u({message:"해제 사유를 입력해주세요.",type:"error"});return}_(!0);try{const d=localStorage.getItem("tnt.sales.empId")||"",E=localStorage.getItem("tnt.sales.empName")||"",a=await fetch("/api/v1/credit/unblock-requests",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({companyType:b,meetingId:W||null,customerSeq:f,customerName:g,assigneeId:d,reasonText:x,collectionPlan:C||null,targetUnblockDate:v||null,summaryLast3mSalesAvg:B,createdBy:E||d})});if(!a.ok)throw new Error("등록 실패");const s=await a.json();if(s.success)u({message:"해제 품의가 등록되었습니다.",type:"success"}),S(),setTimeout(()=>{p()},1500);else throw new Error(s.error||"등록 실패")}catch(d){console.error("해제 품의 등록 실패:",d),u({message:"등록에 실패했습니다.",type:"error"})}finally{_(!1)}};return n?e.jsxs(e.Fragment,{children:[h&&e.jsx(G,{message:h.message,type:h.type,onClose:()=>u(null)}),e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:e.jsxs("div",{style:{background:"white",borderRadius:12,width:420,maxHeight:"80vh",overflow:"auto",boxShadow:"0 20px 25px -5px rgba(0,0,0,0.1)"},children:[e.jsxs("div",{style:{padding:"16px 20px",borderBottom:"1px solid #e5e7eb",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx("h3",{style:{margin:0,fontSize:16,fontWeight:700},children:"매출통제 해제 품의 등록"}),e.jsx("button",{onClick:p,style:{width:28,height:28,borderRadius:"50%",border:"none",background:"#f3f4f6",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(L,{size:14,color:"#6b7280"})})]}),e.jsxs("div",{style:{padding:20},children:[e.jsxs("div",{style:{background:"#f9fafb",borderRadius:8,padding:12,marginBottom:16},children:[e.jsx("div",{style:{fontSize:12,color:"#6b7280",marginBottom:4},children:"거래처"}),e.jsx("div",{style:{fontSize:14,fontWeight:600},children:g})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("label",{style:{display:"block",fontSize:12,fontWeight:600,marginBottom:6,color:"#374151"},children:["해제 사유 ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("textarea",{value:x,onChange:d=>k(d.target.value),placeholder:"매출통제 해제가 필요한 사유를 입력하세요",style:{width:"100%",minHeight:80,padding:10,border:"1px solid #d1d5db",borderRadius:6,fontSize:13,resize:"vertical",boxSizing:"border-box"}})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("label",{style:{display:"block",fontSize:12,fontWeight:600,marginBottom:6,color:"#374151"},children:"수금 계획"}),e.jsx("textarea",{value:C,onChange:d=>I(d.target.value),placeholder:"예상 수금 계획을 입력하세요",style:{width:"100%",minHeight:60,padding:10,border:"1px solid #d1d5db",borderRadius:6,fontSize:13,resize:"vertical",boxSizing:"border-box"}})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("label",{style:{display:"block",fontSize:12,fontWeight:600,marginBottom:6,color:"#374151"},children:"희망 해제일"}),e.jsx("input",{type:"date",value:v,onChange:d=>A(d.target.value),style:{width:"100%",padding:10,border:"1px solid #d1d5db",borderRadius:6,fontSize:13,boxSizing:"border-box"}})]}),e.jsxs("div",{style:{background:"#eff6ff",borderRadius:8,padding:12,marginBottom:16},children:[e.jsx("div",{style:{fontSize:11,color:"#1d4ed8",fontWeight:600,marginBottom:4},children:"참고 정보"}),e.jsxs("div",{style:{fontSize:12,color:"#374151"},children:["3개월 평균매출: ₩",B.toLocaleString()]})]})]}),e.jsxs("div",{style:{padding:"12px 20px",borderTop:"1px solid #e5e7eb",display:"flex",justifyContent:"flex-end",gap:8},children:[e.jsx("button",{onClick:p,style:{padding:"8px 16px",border:"1px solid #d1d5db",borderRadius:6,background:"white",fontSize:13,cursor:"pointer"},children:"취소"}),e.jsx("button",{onClick:w,disabled:m,style:{padding:"8px 16px",border:"none",borderRadius:6,background:"#f59e0b",color:"white",fontSize:13,fontWeight:600,cursor:m?"not-allowed":"pointer",opacity:m?.6:1},children:m?"등록 중...":"등록"})]})]})})]}):null}function Te({isOpen:n,onClose:p,customerSeq:f,customerName:g,companyType:b,meetingId:W,onSubmit:B}){const[S,x]=r.useState(""),[k,C]=r.useState(""),[I]=r.useState("채권관리"),[v,A]=r.useState(()=>new Date().toISOString().split("T")[0]),[m,_]=r.useState("방문"),[h,u]=r.useState(!1),[w,d]=r.useState(null),E=async()=>{if(!S.trim()){d({message:"제목을 입력해주세요.",type:"error"});return}u(!0);try{const a=localStorage.getItem("tnt.sales.empId")||"",s=localStorage.getItem("tnt.sales.empName")||"",M=await fetch("/api/v1/credit/activities",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerSeq:f,companyType:b,subject:S,description:k,activityType:I,activityDate:v,activityMethod:m,assigneeId:a,meetingId:W||null,createdBy:s||a})});if(!M.ok)throw new Error("등록 실패");const H=await M.json();if(H.success)d({message:"활동 이력이 등록되었습니다.",type:"success"}),B(),setTimeout(()=>{x(""),C(""),p()},1500);else throw new Error(H.error||"등록 실패")}catch(a){console.error("활동 이력 등록 실패:",a),d({message:"등록에 실패했습니다.",type:"error"})}finally{u(!1)}};return n?e.jsxs(e.Fragment,{children:[w&&e.jsx(G,{message:w.message,type:w.type,onClose:()=>d(null)}),e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:e.jsxs("div",{style:{background:"white",borderRadius:12,width:420,maxHeight:"80vh",overflow:"auto",boxShadow:"0 20px 25px -5px rgba(0,0,0,0.1)"},children:[e.jsxs("div",{style:{padding:"16px 20px",borderBottom:"1px solid #e5e7eb",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx("h3",{style:{margin:0,fontSize:16,fontWeight:700},children:"채권회의 활동 이력 등록"}),e.jsx("button",{onClick:p,style:{width:28,height:28,borderRadius:"50%",border:"none",background:"#f3f4f6",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(L,{size:14,color:"#6b7280"})})]}),e.jsxs("div",{style:{padding:20},children:[e.jsxs("div",{style:{display:"flex",gap:12,marginBottom:16},children:[e.jsxs("div",{style:{flex:1,background:"#f9fafb",borderRadius:8,padding:12},children:[e.jsx("div",{style:{fontSize:12,color:"#6b7280",marginBottom:4},children:"거래처"}),e.jsx("div",{style:{fontSize:14,fontWeight:600},children:g})]}),e.jsxs("div",{style:{flex:1,background:"#f9fafb",borderRadius:8,padding:12},children:[e.jsx("div",{style:{fontSize:12,color:"#6b7280",marginBottom:4},children:"활동유형"}),e.jsx("div",{style:{fontSize:14,fontWeight:600,color:"#f59e0b"},children:I})]})]}),e.jsxs("div",{style:{display:"flex",gap:12,marginBottom:16},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:{display:"block",fontSize:12,fontWeight:600,marginBottom:6,color:"#374151"},children:"수행일자"}),e.jsx("input",{type:"date",value:v,onChange:a=>A(a.target.value),style:{width:"100%",padding:10,border:"1px solid #d1d5db",borderRadius:6,fontSize:13,boxSizing:"border-box"}})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:{display:"block",fontSize:12,fontWeight:600,marginBottom:6,color:"#374151"},children:"활동방법"}),e.jsxs("select",{value:m,onChange:a=>_(a.target.value),style:{width:"100%",padding:10,border:"1px solid #d1d5db",borderRadius:6,fontSize:13,boxSizing:"border-box"},children:[e.jsx("option",{value:"방문",children:"방문"}),e.jsx("option",{value:"전화",children:"전화"}),e.jsx("option",{value:"문자/메일/팩스",children:"문자/메일/팩스"}),e.jsx("option",{value:"기타",children:"기타"})]})]})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("label",{style:{display:"block",fontSize:12,fontWeight:600,marginBottom:6,color:"#374151"},children:["제목 ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",value:S,onChange:a=>x(a.target.value),placeholder:"활동 제목을 입력하세요",style:{width:"100%",padding:10,border:"1px solid #d1d5db",borderRadius:6,fontSize:13,boxSizing:"border-box"}})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("label",{style:{display:"block",fontSize:12,fontWeight:600,marginBottom:6,color:"#374151"},children:"내용"}),e.jsx("textarea",{value:k,onChange:a=>C(a.target.value),placeholder:"활동 내용을 입력하세요",style:{width:"100%",minHeight:100,padding:10,border:"1px solid #d1d5db",borderRadius:6,fontSize:13,resize:"vertical",boxSizing:"border-box"}})]})]}),e.jsxs("div",{style:{padding:"12px 20px",borderTop:"1px solid #e5e7eb",display:"flex",justifyContent:"flex-end",gap:8},children:[e.jsx("button",{onClick:p,style:{padding:"8px 16px",border:"1px solid #d1d5db",borderRadius:6,background:"white",fontSize:13,cursor:"pointer"},children:"취소"}),e.jsx("button",{onClick:E,disabled:h,style:{padding:"8px 16px",border:"none",borderRadius:6,background:"#f59e0b",color:"white",fontSize:13,fontWeight:600,cursor:h?"not-allowed":"pointer",opacity:h?.6:1},children:h?"등록 중...":"등록"})]})]})})]}):null}function Oe(){const{selectedCustomer:n,setSelectedCustomer:p,meetingDate:f,meetingId:g,meetingStatus:b,opinionRefreshTrigger:W}=ve();if(!n)return e.jsx("div",{style:{flex:1,background:"#f9fafb",display:"flex",alignItems:"center",justifyContent:"center",color:"#9ca3af",fontSize:13},children:"선택된 거래처가 없습니다."});const[B,S]=r.useState([]),[x,k]=r.useState([]),[C,I]=r.useState([]),[v,A]=r.useState([]),[m,_]=r.useState([]),[h,u]=r.useState(0),[w,d]=r.useState([]),[E,a]=r.useState([]),[s,M]=r.useState(null),[H,Q]=r.useState(!1),[fe,Z]=r.useState(!1),[xe,ee]=r.useState(!1),[U,te]=r.useState({show:!1,activityId:null}),[$,ie]=r.useState({show:!1,requestId:null}),[F,j]=r.useState(null),[he,ne]=r.useState(null),[ue,oe]=r.useState(null),[D,se]=r.useState({show:!1,opinion:null}),[q,re]=r.useState({show:!1,opinionId:null}),[le,ye]=r.useState(""),[c,be]=r.useState({opinions:!1,activities:!1,unblock:!1,arAging:!1,collections:!1,monthlyCollections:!1,avgSales:!1,transactions:!1}),R=t=>{be(i=>({...i,[t]:!i[t]}))},me=t=>t==="TNT"?e.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:18,height:18,background:"#3b82f6",color:"white",borderRadius:3,fontSize:10,fontWeight:700,marginRight:4},children:"T"}):t==="DYS"?e.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:18,height:18,background:"#10b981",color:"white",borderRadius:3,fontSize:10,fontWeight:700,marginRight:4},children:"D"}):null,je=t=>{const i={display:"inline-flex",alignItems:"center",justifyContent:"center",width:20,height:20,borderRadius:"50%",color:"white",fontSize:10,fontWeight:700};return t==="high"?e.jsx("span",{style:{...i,background:"#ef4444"},children:"고"}):t==="medium"?e.jsx("span",{style:{...i,background:"#f59e0b"},children:"중"}):t==="low"?e.jsx("span",{style:{...i,background:"#10b981"},children:"저"}):e.jsx("span",{style:{...i,background:"#6b7280"},children:"-"})},P=async()=>{if(n!=null&&n.customerSeq)try{const t=await fetch(`/api/v1/credit/customers/${n.customerSeq}/opinions`);if(!t.ok)throw new Error("API 호출 실패");const i=await t.json();a((i.opinions||[]).map(o=>({id:o.id,meetingId:o.meeting_id,meetingCode:o.meeting_code,meetingName:o.meeting_name,meetingDate:o.meeting_date,decisionComment:o.decision_comment,reviewFlag:o.review_flag,createdAt:o.created_at,createdBy:o.created_by})))}catch(t){console.error("연체 의견 조회 실패:",t),a([])}},K=async()=>{if(n!=null&&n.customerSeq){Q(!0);try{const t=new URLSearchParams;t.append("customerSeq",String(n.customerSeq)),t.append("companyType",n.companyType||""),t.append("externalId","ar_meeting");const i=await fetch(`/api/v1/credit/activities?${t.toString()}`);if(!i.ok)throw new Error("API 호출 실패");const o=await i.json();S((o.items||[]).map(l=>({id:l.id,subject:l.subject,description:l.description,activityType:l.activity_type,activityStatus:l.activity_status,plannedStartAt:l.planned_start_at,createdAt:l.created_at,createdBy:l.created_by})))}catch(t){console.error("활동 이력 조회 실패:",t),S([])}finally{Q(!1)}}},J=async()=>{if(n!=null&&n.customerSeq)try{const t=new URLSearchParams;t.append("customerSeq",String(n.customerSeq)),t.append("companyType",n.companyType||""),f&&t.append("meetingDate",f),g&&t.append("meetingId",String(g));const i=await fetch(`/api/v1/credit/customer-details?${t.toString()}`);if(!i.ok)throw new Error("API 호출 실패");const o=await i.json();k(o.collections||[]),I(o.monthlyCollections||[]),A((o.recentTransactions||[]).map(l=>({transactionDate:l.transaction_date,itemName:l.item_name,quantity:l.quantity,price:l.price,amount:l.amount}))),_(o.monthlySales3Month||[]),u(o.avgSales3Month||0),d(o.unblockRequests||[]),M(o.arAging||null)}catch(t){console.error("거래처 상세 조회 실패:",t),k([]),I([]),A([]),_([]),u(0),d([]),M(null)}},Se=async()=>{if(U.activityId)try{const t=await fetch(`/api/v1/credit/activities/${U.activityId}`,{method:"DELETE"});if(!t.ok)throw new Error("삭제 실패");const i=await t.json();if(i.success)j({message:"활동 이력이 삭제되었습니다.",type:"success"}),K();else throw new Error(i.error||"삭제 실패")}catch(t){console.error("활동 이력 삭제 실패:",t),j({message:"삭제에 실패했습니다.",type:"error"})}finally{te({show:!1,activityId:null})}};r.useEffect(()=>{n!=null&&n.customerSeq?(K(),J(),P()):(S([]),k([]),I([]),A([]),_([]),u(0),d([]),M(null),a([]))},[n==null?void 0:n.customerSeq,n==null?void 0:n.companyType,f,g]),r.useEffect(()=>{n!=null&&n.customerSeq&&W>0&&P()},[W]);const T=t=>{if(!t)return"-";if(/^\d{8}$/.test(t)){const o=t.slice(0,4),l=t.slice(4,6),z=t.slice(6,8);return`${o}. ${l}. ${z}.`}const i=new Date(t);return isNaN(i.getTime())?"-":i.toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit"})},y=t=>t==null?"-":`₩${t.toLocaleString("ko-KR")}`,de=t=>{if(!t)return"-";const i=t.split("-");if(i.length>=2){const o=i[0].slice(2),l=i[1];return`${o}년 ${l}월`}return t},O=(t,i)=>{if(!t)return"-";try{const o=new Date(t);o.setMonth(o.getMonth()-i);const l=o.getFullYear(),z=String(o.getMonth()+1).padStart(2,"0");return`${l}-${z}`}catch{return"-"}},Y=r.useMemo(()=>!x||x.length===0?[]:x.map(t=>({date:t.collection_date||"",totalAmount:t.amount||0,count:t.count||1,methods:t.method?t.method.split(", ").filter(i=>i.trim()!==""):[]})),[x]);if(!n)return e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:"#9ca3af",padding:24,textAlign:"center"},children:[e.jsx(ce,{size:40,strokeWidth:1}),e.jsx("div",{style:{fontSize:14,marginTop:12,marginBottom:8},children:"거래처 상세 정보"}),e.jsx("div",{style:{fontSize:12},children:"왼쪽 목록에서 거래처를 선택하세요"})]});const N=({icon:t,title:i,sectionKey:o,isCollapsed:l,onToggle:z})=>e.jsxs("div",{onClick:()=>z(o),style:{display:"flex",alignItems:"center",gap:6,padding:"8px 10px",background:"#1e3a5f",borderRadius:6,marginBottom:l?0:8,cursor:"pointer",userSelect:"none"},children:[e.jsx(t,{size:16,color:"white"}),e.jsx("span",{style:{fontSize:13,fontWeight:700,color:"white",flex:1},children:i}),l?e.jsx(V,{size:16,color:"white"}):e.jsx(X,{size:16,color:"white"})]});return e.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"12px 16px",borderBottom:"1px solid #e5e7eb",display:"flex",alignItems:"center",justifyContent:"space-between",background:"#fff"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[me(n.companyType||""),e.jsx("span",{style:{fontWeight:700,fontSize:14},children:n.customerName||"-"}),je(n.riskLevel||"")]}),e.jsx("button",{onClick:()=>p(null),style:{width:28,height:28,borderRadius:"50%",border:"none",background:"#f3f4f6",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(L,{size:14,color:"#6b7280"})})]}),e.jsx("div",{style:{flex:1,overflow:"auto",padding:12},children:H?e.jsxs("div",{style:{textAlign:"center",color:"#9ca3af",padding:24},children:[e.jsx(Ce,{size:20,style:{animation:"spin 1s linear infinite"}}),e.jsx("p",{style:{fontSize:12,marginTop:8},children:"로딩 중..."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:16},children:[e.jsx(N,{icon:ae,title:"연체 의견",sectionKey:"opinions",isCollapsed:c.opinions,onToggle:R}),!c.opinions&&(E.length===0?e.jsx("div",{style:{fontSize:12,color:"#9ca3af",padding:12,textAlign:"center",background:"#f9fafb",borderRadius:6},children:"등록된 연체 의견이 없습니다"}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:E.map(t=>e.jsxs("div",{style:{background:"#f9fafb",borderRadius:6,padding:10},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:4},children:e.jsxs("div",{style:{fontSize:11,color:"#6b7280"},children:[T(t.meetingDate)," · ",t.meetingName||t.meetingCode||"-"]})}),t.decisionComment&&e.jsx("div",{style:{fontSize:12,color:"#374151",lineHeight:1.5},children:t.decisionComment}),e.jsxs("div",{style:{fontSize:10,color:"#9ca3af",marginTop:4},children:["작성: ",t.createdBy||"-"]})]},t.id))}))]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 10px",background:"#1e3a5f",borderRadius:6,marginBottom:c.activities?0:8,cursor:"pointer",userSelect:"none"},onClick:()=>R("activities"),children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,flex:1},children:[e.jsx(ce,{size:16,color:"white"}),e.jsx("span",{style:{fontSize:14,fontWeight:700,color:"white"},children:"채권회의 활동 이력"}),c.activities?e.jsx(V,{size:16,color:"white"}):e.jsx(X,{size:16,color:"white"})]}),e.jsxs("button",{onClick:t=>{t.stopPropagation(),ee(!0)},disabled:b==="FINISHED",title:b==="FINISHED"?"종료된 회의입니다":"",style:{padding:"3px 8px",background:b==="FINISHED"?"#9ca3af":"#f59e0b",color:"white",border:"none",borderRadius:4,fontSize:10,fontWeight:600,cursor:b==="FINISHED"?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:3,opacity:b==="FINISHED"?.7:1},children:[e.jsx(ge,{size:10}),"등록"]})]}),!c.activities&&(B.length===0?e.jsx("div",{style:{fontSize:12,color:"#9ca3af",padding:12,textAlign:"center",background:"#f9fafb",borderRadius:6},children:"등록된 활동 이력이 없습니다"}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:B.slice(0,5).map(t=>e.jsxs("div",{style:{background:"#f9fafb",borderRadius:6,padding:10,position:"relative",cursor:"pointer"},onMouseEnter:()=>ne(t.id),onMouseLeave:()=>ne(null),children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",marginBottom:4},children:[e.jsx("div",{style:{fontWeight:600,fontSize:12,color:"#111827",flex:1},children:t.subject||"(제목 없음)"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{fontSize:10,fontWeight:700,color:"#f59e0b",background:"#fffbeb",padding:"2px 6px",borderRadius:4,border:"1px solid #fcd34d"},children:t.activityType}),e.jsx("span",{style:{padding:"2px 5px",background:t.activityStatus==="completed"?"#dcfce7":"#fef3c7",color:t.activityStatus==="completed"?"#166534":"#92400e",borderRadius:3,fontSize:9,fontWeight:600},children:t.activityStatus==="completed"?"완료":t.activityStatus==="계획"?"계획":"진행중"})]})]}),t.description&&e.jsx("div",{style:{fontSize:11,color:"#6b7280",marginBottom:4,lineHeight:1.4},children:t.description.length>50?t.description.substring(0,50)+"...":t.description}),e.jsxs("div",{style:{fontSize:10,color:"#9ca3af"},children:[T(t.plannedStartAt)," · ",t.createdBy||"-"]}),he===t.id&&t.description&&e.jsxs("div",{style:{position:"absolute",left:0,right:0,top:"100%",marginTop:4,background:"#1f2937",color:"white",borderRadius:8,padding:12,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.2)",zIndex:100},children:[e.jsx("div",{style:{position:"absolute",left:20,top:-6,width:0,height:0,borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderBottom:"6px solid #1f2937"}}),e.jsx("div",{style:{fontWeight:600,fontSize:12,marginBottom:8},children:t.subject||"(제목 없음)"}),e.jsx("div",{style:{fontSize:11,lineHeight:1.5,whiteSpace:"pre-wrap"},children:t.description}),e.jsxs("div",{style:{fontSize:10,color:"#9ca3af",marginTop:8,borderTop:"1px solid #374151",paddingTop:8},children:[T(t.plannedStartAt)," · ",t.createdBy||"-"]})]})]},t.id))}))]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 10px",background:"#1e3a5f",borderRadius:6,marginBottom:c.unblock?0:8,cursor:"pointer",userSelect:"none"},onClick:()=>R("unblock"),children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,flex:1},children:[e.jsx(ae,{size:16,color:"white"}),e.jsx("span",{style:{fontSize:13,fontWeight:700,color:"white"},children:"매출통제 해제 품의 이력"}),c.unblock?e.jsx(V,{size:16,color:"white"}):e.jsx(X,{size:16,color:"white"})]}),(()=>{const t=w.some(z=>z.meeting_id===g),i=b==="FINISHED",o=t||i,l=()=>i?"종료된 회의입니다":t?"이 미팅에서 이미 품의가 등록되었습니다":"";return e.jsxs("button",{onClick:z=>{z.stopPropagation(),Z(!0)},disabled:o,title:l(),style:{padding:"3px 8px",background:o?"#9ca3af":"#f59e0b",color:"white",border:"none",borderRadius:4,fontSize:10,fontWeight:600,cursor:o?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:3,opacity:o?.7:1},children:[e.jsx(ge,{size:10}),"생성"]})})()]}),!c.unblock&&e.jsx("div",{children:w.length>0?e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:w.map((t,i)=>e.jsxs("div",{style:{padding:8,background:i===0?"#fef3c7":"white",borderRadius:4,border:"1px solid #fcd34d",position:"relative",cursor:"pointer"},onMouseEnter:()=>oe(t.id||i),onMouseLeave:()=>oe(null),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:4},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",paddingRight:8},children:[e.jsx("span",{style:{fontSize:13,fontWeight:600,color:"#111827",marginBottom:2},children:T(t.created_at)}),e.jsx("span",{style:{fontSize:11,color:"#6b7280"},children:t.requester_name||"요청자"})]}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:6},children:e.jsx("span",{style:{fontSize:9,padding:"1px 4px",background:t.request_status==="SUBMITTED"?"#3b82f6":t.request_status==="APPROVED_1ST"?"#f59e0b":t.request_status==="APPROVED_FINAL"?"#10b981":t.request_status==="REJECTED"?"#ef4444":t.request_status==="WITHDRAWN"?"#6b7280":"#3b82f6",color:"white",borderRadius:3},children:t.request_status==="SUBMITTED"?"제출":t.request_status==="APPROVED_1ST"?"1차승인":t.request_status==="APPROVED_FINAL"?"최종승인":t.request_status==="REJECTED"?"반려":t.request_status==="WITHDRAWN"?"철회":"제출"})})]}),e.jsx("p",{style:{fontSize:12,color:"#92400e",margin:0,lineHeight:1.5},children:t.reason_text&&t.reason_text.length>50?t.reason_text.substring(0,50)+"...":t.reason_text}),t.collection_plan&&e.jsxs("p",{style:{fontSize:11,color:"#78716c",margin:"4px 0 0",lineHeight:1.4},children:["수금계획: ",t.collection_plan&&t.collection_plan.length>30?t.collection_plan.substring(0,30)+"...":t.collection_plan]}),ue===(t.id||i)&&(t.reason_text||t.collection_plan)&&e.jsxs("div",{style:{position:"absolute",left:0,right:0,top:"100%",marginTop:4,background:"#1f2937",color:"white",borderRadius:8,padding:12,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.2)",zIndex:100},children:[e.jsx("div",{style:{position:"absolute",left:20,top:-6,width:0,height:0,borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderBottom:"6px solid #1f2937"}}),e.jsxs("div",{style:{fontSize:10,color:"#9ca3af",marginBottom:6},children:[T(t.created_at)," | ",t.created_by||"-"]}),t.reason_text&&e.jsxs("div",{style:{fontSize:11,lineHeight:1.5,whiteSpace:"pre-wrap",marginBottom:8},children:[e.jsx("span",{style:{fontWeight:600},children:"사유: "}),t.reason_text]}),t.collection_plan&&e.jsxs("div",{style:{fontSize:11,lineHeight:1.5,whiteSpace:"pre-wrap",borderTop:"1px solid #374151",paddingTop:8},children:[e.jsx("span",{style:{fontWeight:600},children:"수금계획: "}),t.collection_plan]})]})]},t.id||i))}):e.jsx("p",{style:{fontSize:12,color:"#9ca3af",margin:0,fontStyle:"italic"},children:"등록된 의견이 없습니다"})})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsx(N,{icon:pe,title:"채권 연령 분석",sectionKey:"arAging",isCollapsed:c.arAging,onToggle:R}),!c.arAging&&(s?e.jsxs("div",{style:{padding:"0 4px"},children:[e.jsxs("div",{style:{display:"flex",gap:8,marginBottom:12},children:[e.jsxs("div",{style:{flex:1,background:"#f9fafb",border:"1px solid #e5e7eb",borderRadius:6,padding:10,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:11,color:"#6b7280",marginBottom:4},children:"총 채권잔액"}),e.jsx("div",{style:{fontSize:13,fontWeight:700,color:"#111827"},children:y(s.total_ar||0)})]}),e.jsxs("div",{style:{flex:1,background:"#fef2f2",border:"1px solid #fee2e2",borderRadius:6,padding:10,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:11,color:"#b91c1c",marginBottom:4},children:"연체금액"}),e.jsx("div",{style:{fontSize:13,fontWeight:700,color:"#ef4444"},children:y(s.overdue||0)})]})]}),e.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:6,overflow:"hidden"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",background:"#f3f4f6",borderBottom:"1px solid #e5e7eb",fontSize:10,fontWeight:600,color:"#4b5563"},children:[e.jsx("div",{style:{padding:"6px",textAlign:"center",borderRight:"1px solid #e5e7eb"},children:"구분"}),e.jsx("div",{style:{padding:"6px",textAlign:"right",borderRight:"1px solid #e5e7eb"},children:"금액"}),e.jsx("div",{style:{padding:"6px",textAlign:"center"},children:"비중"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",fontSize:11,borderBottom:"1px solid #f3f4f6"},children:[e.jsxs("div",{style:{padding:"6px",color:"#6b7280",borderRight:"1px solid #f3f4f6"},children:[O(s.snapshot_date,0)," ",e.jsx("span",{style:{fontSize:9},children:"(정상)"})]}),e.jsx("div",{style:{padding:"6px",textAlign:"right",color:"#111827",borderRight:"1px solid #f3f4f6"},children:y(s.aging_0_30||0)}),e.jsxs("div",{style:{padding:"6px",textAlign:"center",color:"#6b7280"},children:[s.total_ar?Math.round((s.aging_0_30||0)/s.total_ar*100):0,"%"]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",fontSize:11,borderBottom:"1px solid #f3f4f6",background:(s.aging_31_60||0)>0?"#fffbeb":"transparent"},children:[e.jsxs("div",{style:{padding:"6px",color:"#92400e",borderRight:"1px solid #f3f4f6"},children:[O(s.snapshot_date,1)," ",e.jsx("span",{style:{fontSize:9},children:"(1개월)"})]}),e.jsx("div",{style:{padding:"6px",textAlign:"right",color:"#b45309",fontWeight:600,borderRight:"1px solid #f3f4f6"},children:y(s.aging_31_60||0)}),e.jsxs("div",{style:{padding:"6px",textAlign:"center",color:"#92400e"},children:[s.total_ar?Math.round((s.aging_31_60||0)/s.total_ar*100):0,"%"]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",fontSize:11,borderBottom:"1px solid #f3f4f6",background:(s.aging_61_90||0)>0?"#fef3c7":"transparent"},children:[e.jsxs("div",{style:{padding:"6px",color:"#92400e",borderRight:"1px solid #f3f4f6"},children:[O(s.snapshot_date,2)," ",e.jsx("span",{style:{fontSize:9},children:"(2개월)"})]}),e.jsx("div",{style:{padding:"6px",textAlign:"right",color:"#b45309",fontWeight:600,borderRight:"1px solid #f3f4f6"},children:y(s.aging_61_90||0)}),e.jsxs("div",{style:{padding:"6px",textAlign:"center",color:"#92400e"},children:[s.total_ar?Math.round((s.aging_61_90||0)/s.total_ar*100):0,"%"]})]}),(()=>{const t=(s.aging_91_120||0)+(s.aging_121_150||0)+(s.aging_151_180||0)+(s.aging_181_210||0)+(s.aging_211_240||0)+(s.aging_241_270||0)+(s.aging_271_300||0)+(s.aging_301_330||0)+(s.aging_331_365||0)+(s.aging_over_365||0);return e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",fontSize:11,background:t>0?"#fee2e2":"transparent"},children:[e.jsxs("div",{style:{padding:"6px",color:"#b91c1c",borderRight:"1px solid #fecaca"},children:[O(s.snapshot_date,3),"~ ",e.jsx("span",{style:{fontSize:9},children:"(3개월+)"})]}),e.jsx("div",{style:{padding:"6px",textAlign:"right",color:"#ef4444",fontWeight:700,borderRight:"1px solid #fecaca"},children:y(t)}),e.jsxs("div",{style:{padding:"6px",textAlign:"center",color:"#b91c1c"},children:[s.total_ar?Math.round(t/s.total_ar*100):0,"%"]})]})})()]})]}):e.jsx("div",{style:{fontSize:12,color:"#9ca3af",padding:8,textAlign:"center"},children:"채권 데이터가 없습니다"}))]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsx(N,{icon:Ie,title:"수금 현황",sectionKey:"collections",isCollapsed:c.collections,onToggle:R}),!c.collections&&(Y.length===0?e.jsx("div",{style:{fontSize:12,color:"#9ca3af",padding:8,textAlign:"center"},children:"수금 내역이 없습니다"}):e.jsx("div",{style:{fontSize:11},children:Y.map((t,i)=>e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"90px 1fr 90px",gap:8,padding:"6px 0",borderBottom:i<Y.length-1?"1px solid #f3f4f6":"none"},children:[e.jsxs("span",{style:{color:"#6b7280"},children:[T(t.date),t.count>1&&e.jsxs("span",{style:{color:"#9ca3af",fontSize:10,marginLeft:2},children:["(",t.count,"회)"]})]}),e.jsx("span",{style:{color:"#374151",textAlign:"left"},children:t.methods.length>0?t.methods.join(", "):"-"}),e.jsx("span",{style:{fontWeight:600,color:"#10b981",textAlign:"right"},children:y(t.totalAmount)})]},i))}))]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsx(N,{icon:we,title:"월별 수금내역 (12개월)",sectionKey:"monthlyCollections",isCollapsed:c.monthlyCollections,onToggle:R}),!c.monthlyCollections&&(C.length===0?e.jsx("div",{style:{fontSize:12,color:"#9ca3af",padding:8,textAlign:"center"},children:"월별 수금 내역이 없습니다"}):e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:6},children:C.slice(0,12).map((t,i)=>e.jsxs("div",{style:{background:i<3?"#ecfdf5":"#f9fafb",borderRadius:6,padding:6,textAlign:"center",border:i<3?"1px solid #10b981":"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:9,color:"#6b7280"},children:de(t.month)}),e.jsx("div",{style:{fontSize:11,fontWeight:600,color:i<3?"#059669":"#111827"},children:y(t.amount)})]},i))}))]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsx(N,{icon:ze,title:"3개월 평균매출",sectionKey:"avgSales",isCollapsed:c.avgSales,onToggle:R}),!c.avgSales&&e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"stretch"},children:[e.jsxs("div",{style:{background:"#eff6ff",borderRadius:6,padding:10,textAlign:"center",minWidth:90,display:"flex",flexDirection:"column",justifyContent:"center"},children:[e.jsx("div",{style:{fontSize:10,color:"#6b7280",marginBottom:2},children:"평균"}),e.jsx("div",{style:{fontSize:14,fontWeight:700,color:"#1d4ed8"},children:y(h)})]}),m.length>0&&m.map((t,i)=>e.jsxs("div",{style:{flex:1,background:"#f9fafb",borderRadius:6,padding:8,textAlign:"center",display:"flex",flexDirection:"column",justifyContent:"center"},children:[e.jsx("div",{style:{fontSize:10,color:"#6b7280"},children:de(t.month)}),e.jsx("div",{style:{fontSize:11,fontWeight:600,color:"#111827"},children:y(t.amount)})]},i))]})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsx(N,{icon:ke,title:"최근거래내역",sectionKey:"transactions",isCollapsed:c.transactions,onToggle:R}),!c.transactions&&(v.length===0?e.jsx("div",{style:{fontSize:12,color:"#9ca3af",padding:8,textAlign:"center"},children:"최근 거래 내역이 없습니다"}):e.jsxs("div",{style:{fontSize:10},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"70px 1fr 50px 65px 75px",gap:4,padding:"6px 0",borderBottom:"1px solid #e5e7eb",fontWeight:600,color:"#6b7280"},children:[e.jsx("span",{children:"일자"}),e.jsx("span",{children:"품목"}),e.jsx("span",{style:{textAlign:"right"},children:"수량"}),e.jsx("span",{style:{textAlign:"right"},children:"단가"}),e.jsx("span",{style:{textAlign:"right"},children:"금액"})]}),e.jsx("div",{style:{maxHeight:300,overflowY:"auto"},children:v.map((t,i)=>{var o;return e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"70px 1fr 50px 65px 75px",gap:4,padding:"6px 0",borderBottom:i<v.length-1?"1px solid #f3f4f6":"none",color:"#374151"},children:[e.jsx("span",{style:{color:"#6b7280"},children:T(t.transactionDate)}),e.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:t.itemName||"-",children:t.itemName||"-"}),e.jsx("span",{style:{textAlign:"right"},children:((o=t.quantity)==null?void 0:o.toLocaleString())||"-"}),e.jsx("span",{style:{textAlign:"right"},children:t.price?`₩${t.price.toLocaleString()}`:"-"}),e.jsx("span",{style:{textAlign:"right",fontWeight:600,color:"#111827"},children:y(t.amount)})]},i)})})]}))]})]})}),e.jsx("div",{style:{padding:10,borderTop:"1px solid #e5e7eb",background:"#f9fafb",fontSize:10,color:"#6b7280"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs("span",{children:["담당: ",n.salesRep||"-"]}),e.jsxs("span",{children:["부서: ",n.department||"-"]})]})}),e.jsx(Re,{isOpen:fe,onClose:()=>Z(!1),customerSeq:n.customerSeq||0,customerName:n.customerName||"",companyType:n.companyType||"",meetingId:g,avgSales3Month:h,onSubmit:()=>{J()}}),e.jsx(Te,{isOpen:xe,onClose:()=>ee(!1),customerSeq:n.customerSeq||0,customerName:n.customerName||"",companyType:n.companyType||"",meetingId:g,onSubmit:()=>{K()}}),U.show&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1500},children:e.jsxs("div",{style:{background:"white",borderRadius:8,padding:20,width:300,boxShadow:"0 4px 20px rgba(0, 0, 0, 0.15)"},children:[e.jsx("div",{style:{fontSize:14,fontWeight:600,marginBottom:12,color:"#111827"},children:"삭제 확인"}),e.jsx("div",{style:{fontSize:13,color:"#6b7280",marginBottom:20},children:"이 활동 이력을 삭제하시겠습니까?"}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:8},children:[e.jsx("button",{onClick:()=>te({show:!1,activityId:null}),style:{padding:"8px 16px",border:"1px solid #d1d5db",borderRadius:6,background:"white",fontSize:13,cursor:"pointer"},children:"취소"}),e.jsx("button",{onClick:Se,style:{padding:"8px 16px",border:"none",borderRadius:6,background:"#ef4444",color:"white",fontSize:13,fontWeight:600,cursor:"pointer"},children:"삭제"})]})]})}),$.show&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1500},children:e.jsxs("div",{style:{background:"white",borderRadius:8,padding:20,width:300,boxShadow:"0 4px 20px rgba(0, 0, 0, 0.15)"},children:[e.jsx("div",{style:{fontSize:14,fontWeight:600,marginBottom:12,color:"#111827"},children:"삭제 확인"}),e.jsx("div",{style:{fontSize:13,color:"#6b7280",marginBottom:20},children:"이 해제 품의를 삭제하시겠습니까?"}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:8},children:[e.jsx("button",{onClick:()=>ie({show:!1,requestId:null}),style:{padding:"8px 16px",border:"1px solid #d1d5db",borderRadius:6,background:"white",fontSize:13,cursor:"pointer"},children:"취소"}),e.jsx("button",{onClick:async()=>{if($.requestId)try{const i=await(await fetch(`/api/v1/credit/unblock-requests/${$.requestId}`,{method:"DELETE"})).json();i.success?(j({message:"삭제되었습니다.",type:"success"}),J()):j({message:i.error||"삭제에 실패했습니다.",type:"error"})}catch(t){console.error("삭제 실패:",t),j({message:"삭제에 실패했습니다.",type:"error"})}finally{ie({show:!1,requestId:null})}},style:{padding:"8px 16px",border:"none",borderRadius:6,background:"#ef4444",color:"white",fontSize:13,fontWeight:600,cursor:"pointer"},children:"삭제"})]})]})}),D.show&&D.opinion&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1500},children:e.jsxs("div",{style:{background:"white",borderRadius:12,padding:20,width:400,boxShadow:"0 4px 20px rgba(0, 0, 0, 0.15)"},children:[e.jsx("div",{style:{fontSize:16,fontWeight:700,marginBottom:16,color:"#111827"},children:"연체 의견 수정"}),e.jsxs("div",{style:{fontSize:12,color:"#6b7280",marginBottom:8},children:[T(D.opinion.meetingDate)," · ",D.opinion.meetingName||D.opinion.meetingCode||"-"]}),e.jsx("textarea",{value:le,onChange:t=>ye(t.target.value),placeholder:"연체 의견을 입력하세요",style:{width:"100%",minHeight:120,padding:12,border:"1px solid #d1d5db",borderRadius:8,fontSize:13,resize:"vertical",boxSizing:"border-box",marginBottom:16}}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:8},children:[e.jsx("button",{onClick:()=>se({show:!1,opinion:null}),style:{padding:"8px 16px",border:"1px solid #d1d5db",borderRadius:6,background:"white",fontSize:13,cursor:"pointer"},children:"취소"}),e.jsx("button",{onClick:async()=>{if(D.opinion)try{const t=localStorage.getItem("tnt.sales.empName")||localStorage.getItem("tnt.sales.empId")||"",o=await(await fetch(`/api/v1/credit/meeting-customers/${D.opinion.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({decisionComment:le,updatedBy:t})})).json();if(o.success)j({message:"연체 의견이 수정되었습니다.",type:"success"}),P(),se({show:!1,opinion:null});else throw new Error(o.error||"수정 실패")}catch(t){console.error("연체 의견 수정 실패:",t),j({message:"수정에 실패했습니다.",type:"error"})}},style:{padding:"8px 16px",border:"none",borderRadius:6,background:"#3b82f6",color:"white",fontSize:13,fontWeight:600,cursor:"pointer"},children:"저장"})]})]})}),q.show&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1500},children:e.jsxs("div",{style:{background:"white",borderRadius:8,padding:20,width:300,boxShadow:"0 4px 20px rgba(0, 0, 0, 0.15)"},children:[e.jsx("div",{style:{fontSize:14,fontWeight:600,marginBottom:12,color:"#111827"},children:"삭제 확인"}),e.jsx("div",{style:{fontSize:13,color:"#6b7280",marginBottom:20},children:"이 연체 의견을 삭제하시겠습니까?"}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:8},children:[e.jsx("button",{onClick:()=>re({show:!1,opinionId:null}),style:{padding:"8px 16px",border:"1px solid #d1d5db",borderRadius:6,background:"white",fontSize:13,cursor:"pointer"},children:"취소"}),e.jsx("button",{onClick:async()=>{if(q.opinionId)try{const i=await(await fetch(`/api/v1/credit/meeting-customers/${q.opinionId}`,{method:"DELETE"})).json();if(i.success)j({message:"연체 의견이 삭제되었습니다.",type:"success"}),P();else throw new Error(i.error||"삭제 실패")}catch(t){console.error("연체 의견 삭제 실패:",t),j({message:"삭제에 실패했습니다.",type:"error"})}finally{re({show:!1,opinionId:null})}},style:{padding:"8px 16px",border:"none",borderRadius:6,background:"#ef4444",color:"white",fontSize:13,fontWeight:600,cursor:"pointer"},children:"삭제"})]})]})}),F&&e.jsx(G,{message:F.message,type:F.type,onClose:()=>j(null)})]})}export{Oe as UnblockCreditRightPanel};
