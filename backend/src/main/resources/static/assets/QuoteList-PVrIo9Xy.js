import{r,j as t,F as y}from"./index-BB_3LKiY.js";import{S as b}from"./search-DWsQZhhE.js";import{P as u}from"./plus-NPOo4Ump.js";function f(){const[d,x]=r.useState(""),[i,p]=r.useState(""),[o,c]=r.useState(""),[a,h]=r.useState([]),l=async()=>{try{const e=new URLSearchParams;d&&e.append("keyword",d),i&&e.append("customer",i),o&&e.append("status",o);const n=await fetch(`/api/v1/quotes?${e.toString()}`);if(n.ok){const s=await n.json();h(s)}}catch(e){console.error("Failed to fetch quotes:",e)}};r.useEffect(()=>{l()},[]);const g=()=>{l()};return t.jsxs("div",{className:"list-view",style:{padding:24,height:"100%",overflow:"auto",background:"var(--panel)"},children:[t.jsxs("h1",{style:{fontSize:24,fontWeight:600,marginBottom:16,display:"flex",alignItems:"center",gap:8},children:[t.jsx(y,{size:24}),"견적 관리"]}),t.jsxs("div",{style:{padding:16,border:"1px solid var(--border)",borderRadius:8,marginBottom:16,background:"var(--bg-secondary)"},children:[t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:12,marginBottom:12},children:[t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",fontSize:12,marginBottom:4,color:"var(--text-secondary)"},children:"견적명/견적번호"}),t.jsx("input",{type:"text",className:"input",placeholder:"검색어 입력",style:{width:"100%"},value:d,onChange:e=>x(e.target.value)})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",fontSize:12,marginBottom:4,color:"var(--text-secondary)"},children:"거래처명"}),t.jsx("input",{type:"text",className:"input",placeholder:"거래처명 입력",style:{width:"100%"},value:i,onChange:e=>p(e.target.value)})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",fontSize:12,marginBottom:4,color:"var(--text-secondary)"},children:"상태"}),t.jsxs("select",{className:"input",style:{width:"100%"},value:o,onChange:e=>c(e.target.value),children:[t.jsx("option",{value:"",children:"전체"}),t.jsx("option",{value:"DRAFT",children:"작성중"}),t.jsx("option",{value:"REQ_APPROVAL",children:"승인요청"}),t.jsx("option",{value:"APPROVED",children:"승인완료"}),t.jsx("option",{value:"REJECTED",children:"반려"}),t.jsx("option",{value:"CONFIRMED",children:"확정"})]})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",fontSize:12,marginBottom:4,color:"var(--text-secondary)"},children:"시작일"}),t.jsx("input",{type:"date",className:"input",style:{width:"100%"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",fontSize:12,marginBottom:4,color:"var(--text-secondary)"},children:"종료일"}),t.jsx("input",{type:"date",className:"input",style:{width:"100%"}})]})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:8},children:[t.jsx("button",{className:"btn btn-secondary",children:"초기화"}),t.jsxs("button",{className:"btn btn-primary",onClick:g,children:[t.jsx(b,{size:14,style:{marginRight:4}}),"검색"]})]})]}),t.jsxs("div",{style:{padding:"12px 0",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs("div",{style:{fontSize:13,color:"var(--text-secondary)"},children:["총 ",t.jsx("strong",{style:{color:"var(--text-primary)"},children:a.length}),"건"]}),t.jsx("div",{style:{display:"flex",gap:8},children:t.jsxs("button",{className:"btn btn-primary",onClick:()=>window.dispatchEvent(new CustomEvent("tnt.sales.navigate",{detail:{key:"quote:new"}})),children:[t.jsx(u,{size:14,style:{marginRight:4}}),"신규 견적"]})})]}),t.jsx("div",{style:{overflow:"auto",border:"1px solid var(--border)",borderRadius:8},children:t.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:13},children:[t.jsx("thead",{children:t.jsxs("tr",{style:{background:"var(--bg-secondary)"},children:[t.jsx("th",{style:{padding:"10px 12px",textAlign:"center",borderBottom:"1px solid var(--border)",width:40},children:t.jsx("input",{type:"checkbox"})}),t.jsx("th",{style:{padding:"10px 12px",textAlign:"left",borderBottom:"1px solid var(--border)"},children:"견적번호"}),t.jsx("th",{style:{padding:"10px 12px",textAlign:"left",borderBottom:"1px solid var(--border)"},children:"견적명"}),t.jsx("th",{style:{padding:"10px 12px",textAlign:"left",borderBottom:"1px solid var(--border)"},children:"거래처"}),t.jsx("th",{style:{padding:"10px 12px",textAlign:"left",borderBottom:"1px solid var(--border)"},children:"담당자"}),t.jsx("th",{style:{padding:"10px 12px",textAlign:"center",borderBottom:"1px solid var(--border)"},children:"상태"}),t.jsx("th",{style:{padding:"10px 12px",textAlign:"right",borderBottom:"1px solid var(--border)"},children:"총 금액"}),t.jsx("th",{style:{padding:"10px 12px",textAlign:"center",borderBottom:"1px solid var(--border)"},children:"등록일"})]})}),t.jsx("tbody",{children:a.map((e,n)=>t.jsxs("tr",{style:{cursor:"pointer"},onMouseEnter:s=>s.currentTarget.style.background="var(--bg-secondary)",onMouseLeave:s=>s.currentTarget.style.background="transparent",children:[t.jsx("td",{style:{padding:"10px 12px",textAlign:"center",borderBottom:"1px solid var(--border)"},children:t.jsx("input",{type:"checkbox"})}),t.jsx("td",{style:{padding:"10px 12px",borderBottom:"1px solid var(--border)",color:"var(--primary)"},children:e.quoteId||e.id}),t.jsx("td",{style:{padding:"10px 12px",borderBottom:"1px solid var(--border)",fontWeight:500},children:e.quoteName}),t.jsx("td",{style:{padding:"10px 12px",borderBottom:"1px solid var(--border)"},children:e.customer}),t.jsx("td",{style:{padding:"10px 12px",borderBottom:"1px solid var(--border)"},children:e.salesRep}),t.jsx("td",{style:{padding:"10px 12px",textAlign:"center",borderBottom:"1px solid var(--border)"},children:t.jsx("span",{style:{padding:"2px 8px",borderRadius:4,fontSize:11,background:e.status==="APPROVED"?"var(--success)":e.status==="REQ_APPROVAL"?"var(--warning)":"var(--bg-secondary)",color:e.status==="APPROVED"?"var(--on-accent)":e.status==="REQ_APPROVAL"?"#000":"var(--text-secondary)"},children:e.status})}),t.jsx("td",{style:{padding:"10px 12px",textAlign:"right",borderBottom:"1px solid var(--border)"},children:e.totalAmount}),t.jsx("td",{style:{padding:"10px 12px",textAlign:"center",borderBottom:"1px solid var(--border)"},children:e.date})]},n))})]})}),t.jsxs("div",{style:{padding:"16px 0",display:"flex",justifyContent:"center",alignItems:"center",gap:4},children:[t.jsx("button",{className:"btn btn-ghost",style:{padding:"4px 8px",minWidth:32},children:"«"}),t.jsx("button",{className:"btn btn-ghost",style:{padding:"4px 8px",minWidth:32},children:"‹"}),t.jsx("button",{className:"btn btn-primary",style:{padding:"4px 8px",minWidth:32},children:"1"}),t.jsx("button",{className:"btn btn-ghost",style:{padding:"4px 8px",minWidth:32},children:"2"}),t.jsx("button",{className:"btn btn-ghost",style:{padding:"4px 8px",minWidth:32},children:"›"}),t.jsx("button",{className:"btn btn-ghost",style:{padding:"4px 8px",minWidth:32},children:"»"})]})]})}export{f as QuoteList};
