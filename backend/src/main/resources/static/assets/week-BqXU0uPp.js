import{j as t,r as n,R as T}from"./index-BNMu8Wi9.js";function Rt({value:h,onChange:g,placeholder:c,readOnly:v,className:x,style:R}){return t.jsx("input",{type:"text",className:["subject-input",x].filter(Boolean).join(" "),style:R,value:h,onChange:q=>g==null?void 0:g(q.target.value),placeholder:c,readOnly:v})}const te=[{value:"정기방문",label:"정기방문"},{value:"영업기회",label:"영업기회"},{value:"채권관리",label:"채권관리"}],ee=[{value:"계획",label:"계획"},{value:"완료",label:"완료"},{value:"취소",label:"취소"},{value:"연기",label:"연기"},{value:"미방문",label:"미방문"}],ae=[{value:"방문",label:"방문"},{value:"전화",label:"전화"},{value:"문자/메일/팩스",label:"문자/메일/팩스"},{value:"기타",label:"기타"}],se=["공개","팀공유","개인"];function fe({bare:h=!1,initial:g,editId:c,leadId:v,onSaved:x,onNoticeClose:R,lockSubject:q,planMode:s,multiTargets:_}){const[o,mt]=n.useState(null),[pt,ie]=n.useState(""),[L,tt]=n.useState(""),[z,et]=n.useState(""),[F,Bt]=n.useState(!1),[J,Ut]=n.useState(!1),[V,ft]=n.useState("공개"),[K,at]=n.useState("방문"),[B,gt]=n.useState("정기방문"),[A,yt]=n.useState("계획"),[ht,Ht]=n.useState(""),[re,Wt]=n.useState(""),[ce,Yt]=n.useState(!1),[vt,le]=n.useState(""),zt=!1,[C,G]=n.useState(""),[D,U]=n.useState(""),[st,St]=n.useState(""),[H,xt]=n.useState(""),[y,bt]=n.useState(null),[nt,jt]=n.useState(g??null),[wt,oe]=n.useState(""),[At,de]=n.useState(""),[O,Nt]=n.useState(""),[Ft,it]=n.useState([]),[rt,W]=n.useState(!1),[ue,Jt]=n.useState(null),[It,k]=n.useState(null),[Tt,E]=n.useState(()=>({open:!1,text:""})),[Ct,Q]=n.useState(null),[Vt,ct]=n.useState(!1),[Dt,Kt]=n.useState(new Date),lt=T.useRef(null),Y=nt??g,X=(Y==null?void 0:Y.id)??c??(s?"plan":"new"),b=n.useMemo(()=>localStorage.getItem("tnt.sales.empId"),[]),P=n.useMemo(()=>localStorage.getItem("tnt.sales.assigneeId"),[]);n.useMemo(()=>{try{const e=localStorage.getItem("tnt.sales.selectedCustomer");e&&mt(JSON.parse(e))}catch{mt(null)}},[]);const Z=T.useCallback(async()=>{try{const e=[],i=!!(P||b);P?e.push(["assigneeId",String(P)]):b&&e.push(["empId",String(b)]);async function a(r){const u=new URL("/api/v1/sales-activities",window.location.origin);r&&u.searchParams.set("sfAccountId",r),e.forEach(([j,$])=>u.searchParams.set(j,$)),u.searchParams.set("mineOnly",i?"true":"false"),u.searchParams.set("onlyRoot","true"),u.searchParams.set("limit","200");const f=await fetch(u.toString());if(!f.ok)return[];const I=await f.json();return Array.isArray(I)?I:[]}if(v){const r=new URL("/api/v1/sales-activities",window.location.origin);r.searchParams.set("sfLeadId",String(v)),e.forEach(([j,$])=>r.searchParams.set(j,$)),r.searchParams.set("mineOnly",i?"true":"false"),r.searchParams.set("onlyRoot","true"),r.searchParams.set("limit","200");const u=await fetch(r.toString()),f=u.ok?await u.json():[],I=Array.isArray(f)?f:[];it(I.slice(0,200));return}const d=[];y!=null&&y.id&&d.push(String(y.id)),o!=null&&o.customerId&&d.push(String(o.customerId)),(o==null?void 0:o.customerSeq)!=null&&d.push(String(o.customerSeq)),H&&d.push(String(H));const m=Array.from(new Set(d.filter(Boolean)));let p=[];m.length>0?p=(await Promise.all(m.map(u=>a(u)))).flat():p=await a(void 0);const N=new Map;p.forEach(r=>{r&&r.id!=null&&N.set(Number(r.id),r)});let l=Array.from(N.values());const w=g||{},S=w.parentActivitySeq!=null?Number(w.parentActivitySeq):void 0;S&&!l.some(r=>Number(r.id)===S)&&(l=[{id:S,subject:w.parentSubject||"상위활동"},...l]),l.sort((r,u)=>{const f=r.createdAt?new Date(r.createdAt).getTime():0;return(u.createdAt?new Date(u.createdAt).getTime():0)-f}),it(l.slice(0,200))}catch{it([])}},[y==null?void 0:y.id,o==null?void 0:o.customerSeq,o==null?void 0:o.customerId,H,b,P,g==null?void 0:g.parentActivitySeq,g==null?void 0:g.parentSubject,v]);T.useEffect(()=>{Z()},[Z]),T.useEffect(()=>{if(!c){jt(g??null);return}let e=!1;return(async()=>{try{const i=await fetch(`/api/v1/sales-activities/${c}`);if(!i.ok)throw new Error(`HTTP ${i.status}`);const a=await i.json();if(e)return;const d={id:a.id,subject:a.subject,description:a.description,channel:a.channel,activityType:a.activityType,activityStatus:a.activityStatus,plannedStartAt:a.plannedStartAt||a.planned_start_at,actualStartAt:a.actualStartAt||a.actual_start_at,sfAccountId:a.sfAccountId??a.sf_account_id,customerName:a.customerName??a.customer_name,parentActivitySeq:a.parentSeq??a.parent_activity_seq,parentSubject:a.parentSubject??a.parent_subject};jt(d)}catch(i){console.error("Failed to load activity detail for edit:",i)}})(),()=>{e=!0}},[c,g]),T.useEffect(()=>{if(!(lt.current!==X||c&&nt)&&lt.current===X)return;lt.current=X;const i=w=>{if(!w)return"";const S=new Date(w);if(isNaN(S.getTime()))return"";const r=S.getTimezoneOffset();return new Date(S.getTime()-r*6e4).toISOString().slice(0,16)},a=Y||{};tt(a.subject??""),et(a.description??"");const d={in_person:"방문",phone:"전화",email:"문자/메일/팩스",other:"기타"},m={site_visit:"정기방문",opportunity:"영업기회",AR_mgmt:"채권관리",meeting:"미팅",call:"전화",email:"이메일",demo:"데모",task:"업무",other:"기타"},p={scheduled:"계획",completed:"완료",canceled:"취소",postponed:"연기",no_show:"미방문"},N={public:"공개",team:"팀공유",private:"개인"};at(a.channel&&(d[a.channel]||a.channel)||"방문"),gt(a.activityType&&(m[a.activityType]||a.activityType)||"정기방문"),yt(s?"계획":a.activityStatus&&(p[a.activityStatus]||a.activityStatus)||"계획"),ft(a.visibility?N[a.visibility]||String(a.visibility):"공개"),G(i(a.plannedStartAt));const l=i(a.actualStartAt);U(l),St(l),xt(a.sfAccountId!=null?String(a.sfAccountId):""),Nt(a.parentActivitySeq!=null?String(a.parentActivitySeq):""),a.sfAccountId&&String(a.sfAccountId)||a.customerName?bt({id:a.sfAccountId?String(a.sfAccountId):void 0,name:a.customerName?String(a.customerName):void 0}):bt(null)},[Y,X,s,c,nt]),T.useEffect(()=>{c||s||G(e=>{if(e&&String(e).trim()!=="")return e;const i=new Date,a=i.getTimezoneOffset();return new Date(i.getTime()-a*6e4).toISOString().slice(0,16)})},[c,s]);const[Ot,kt]=T.useState(""),[Et,Gt]=T.useState(!0);T.useEffect(()=>{if(Et){kt(A),Gt(!1);return}if(!(Ot===A||s)){if(A==="완료"&&(!st||String(st).trim()==="")){const e=new Date,i=e.getTimezoneOffset(),d=new Date(e.getTime()-i*6e4).toISOString().slice(0,16);U(d)}kt(A)}},[A,st,s,Ot,Et]),T.useEffect(()=>{!D||C||G(D)},[D,C]);const[Qt,M]=n.useState(!1);T.useEffect(()=>{let e=!1;async function i(){try{if(!c){e||M(!1);return}const a=new URL("/api/v1/sales-activities",window.location.origin);a.searchParams.set("parentSeq",String(c)),a.searchParams.set("mineOnly","false"),a.searchParams.set("limit","1");const d=await fetch(a.toString());if(!d.ok){e||M(!1);return}const m=await d.json(),p=Array.isArray(m)?m:[];e||M(p.length>0)}catch{e||M(!1)}}return i(),()=>{e=!0}},[c]);const ot=!!(c&&Qt);async function Xt(){if(k(null),Q(null),Jt(null),!b){k("로그인이 필요합니다");return}let e=D;if(["완료","취소","미방문"].includes(A)&&(!D||D.trim()==="")){const a=new Date,d=a.getTimezoneOffset();e=new Date(a.getTime()-d*6e4).toISOString().slice(0,16),U(e)}if(e&&!["완료","취소","미방문"].includes(A)){E({open:!0,text:"종료일시가 입력된 경우 상태는 완료, 취소, 미방문 중 하나여야 합니다."});return}const i=pt&&pt.trim()||P||b||"";if(!i||!B||!A){k("필수 항목: 활동유형, 상태 (로그인 필요)");return}W(!0);try{const a=p=>p?new Date(p).toISOString():void 0;let d=!1,m;if(c){const p=a(C),N=e?e.trim():"",l=a(N),w=N?l:"",S={subject:L||void 0,description:z||void 0,activityStatus:A||void 0,activityType:B||void 0,channel:K||void 0,isAllDay:F,isPrivate:J,visibility:V,parentActivitySeq:ot?void 0:O?Number(O):void 0,plannedStartAt:p,actualStartAt:w},r=C?new Date(C).getTime():p?new Date(p).getTime():NaN,u=N?new Date(N).getTime():l?new Date(l).getTime():NaN;if(!isNaN(r)&&!isNaN(u)&&u<r){const j="종료일시는 계획 일시보다 커야 합니다.";W(!1),k(j),Q(j);return}const f=await fetch(`/api/v1/sales-activities/${c}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)}),I=await f.json().catch(()=>({}));if(!f.ok||I.error)throw new Error(I.error||`HTTP ${f.status}`);d=!0,m=c;try{const j=new URL("/api/v1/sales-activities",window.location.origin);P&&j.searchParams.set("assigneeId",P),b&&j.searchParams.set("empId",b),j.searchParams.set("mineOnly","true"),j.searchParams.set("_t",Date.now().toString());const $=await fetch(j.toString(),{cache:"no-cache"});if($.ok){const Pt=await $.json(),dt=Array.isArray(Pt)?Pt.find(qt=>qt.id===c):null;if(dt){const _t=($t=>{if(!$t)return"";const ut=new Date($t);if(isNaN(ut.getTime()))return"";const Mt=ut.getTimezoneOffset();return new Date(ut.getTime()-Mt*6e4).toISOString().slice(0,16)})(dt.actualStartAt||dt.actual_start_at);U(_t),St(_t)}}}catch(j){console.error("Failed to reload activity data:",j)}E({open:!0,text:"수정되었습니다."});try{window.dispatchEvent(new CustomEvent("tnt.sales.activity.updated",{detail:{id:m}}))}catch{}try{x&&x(m)}catch{}}else{const p=new Date().toISOString(),N=s&&Array.isArray(_)&&_.length>0?_:null;if(N){for(const l of N){const w=((l==null?void 0:l.customerName)||"").trim(),S=w?`${w} (활동계획)`:L||void 0,r=l!=null&&l.customerId?String(l.customerId):(l==null?void 0:l.customerSeq)!=null?String(l.customerSeq):void 0;if(!r)continue;const u={sfOwnerId:i,subject:S,description:z||void 0,isAllDay:F,isPrivate:J,visibility:V,channel:K,activityType:B,activityStatus:A,nextStep:ht||void 0,nextStepDueAt:a(vt),plannedStartAt:a(C),actualStartAt:a(e)||p,parentActivitySeq:O?Number(O):void 0,sfLeadId:v?String(v):void 0,sfAccountId:v?void 0:r,sfContactId:wt||void 0,sfOpportunityId:At||void 0,createdBy:b,updatedBy:b,createdAt:p,updatedAt:p},f=await fetch("/api/v1/sales-activities",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)}),I=await f.json().catch(()=>({}));if(!f.ok||I.error)throw new Error(I.error||`HTTP ${f.status}`);m=I.id;try{window.dispatchEvent(new CustomEvent("tnt.sales.activity.updated",{detail:{id:m}}))}catch{}}d=!0,E({open:!0,text:"저장되었습니다."});try{x&&x(m)}catch{}}else{const l=((y==null?void 0:y.name)||(o==null?void 0:o.customerName)||"").trim(),w=s&&l?`${l} (활동계획)`:L||void 0,S=new Date().toISOString(),r={sfOwnerId:i,subject:w,description:z||void 0,isAllDay:F,isPrivate:J,visibility:V,channel:K,activityType:B,activityStatus:A,nextStep:ht||void 0,nextStepDueAt:a(vt),plannedStartAt:a(C),actualStartAt:a(e)||S,parentActivitySeq:O?Number(O):void 0,sfLeadId:v?String(v):void 0,sfAccountId:v?void 0:((y==null?void 0:y.id)??(o!=null&&o.customerId?String(o.customerId):H))||void 0,sfContactId:wt||void 0,sfOpportunityId:At||void 0,createdBy:b,updatedBy:b,createdAt:S,updatedAt:S},u=await fetch("/api/v1/sales-activities",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),f=await u.json().catch(()=>({}));if(!u.ok||f.error)throw new Error(f.error||`HTTP ${u.status}`);d=!0,m=f.id,E({open:!0,text:"저장되었습니다."});try{window.dispatchEvent(new CustomEvent("tnt.sales.activity.updated",{detail:{id:m}}))}catch{}try{x&&x(m)}catch{}}}Kt(new Date),c||(tt(""),et(""),Ht(""),Wt(""),Yt(!1))}catch(a){E({open:!0,text:a.message||"저장 중 오류가 발생했습니다"})}finally{W(!1)}}const Zt=async()=>{if(c){ct(!1),W(!0),k(null);try{const e=await fetch(`/api/v1/sales-activities/${c}`,{method:"DELETE"});if(!e.ok){const i=await e.json().catch(()=>({}));throw new Error(i.error||`HTTP ${e.status}`)}E({open:!0,text:"삭제되었습니다."});try{window.dispatchEvent(new CustomEvent("tnt.sales.activity.updated",{detail:{id:c}}))}catch{}try{x&&x(void 0)}catch{}}catch(e){const i=e.message||"삭제 중 오류가 발생했습니다";k(i),Q(i)}finally{W(!1)}}};return t.jsxs("section",{children:[!h&&t.jsxs("div",{className:"page-title",children:[t.jsx("h2",{children:"영업활동 등록"}),t.jsxs("div",{className:"meta",children:[t.jsx("span",{className:"badge",children:"Draft"}),t.jsxs("span",{className:"badge",children:["Last Saved: ",t.jsx("time",{children:Dt?Dt.toLocaleString():"—"})]})]})]}),!b&&t.jsx("div",{className:"error",style:{marginBottom:8},children:"로그인이 필요합니다"}),t.jsxs("section",{className:h?void 0:s?"card plan-compact-card":"card",children:[t.jsxs("div",{className:s?"plan-compact":"form-grid",style:s?{display:"flex",flexDirection:"column",gap:6}:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px 16px"},children:[t.jsxs("div",{className:"field",style:{display:"grid",gridTemplateColumns:s?"90px 260px":"120px 1fr",gap:s?6:8,alignItems:"center",gridColumn:"1 / -1"},children:[t.jsx("label",{children:"제목"}),t.jsx(Rt,{value:L,onChange:q?void 0:tt,placeholder:"예: 고객사 주간 미팅",readOnly:!!q})]}),!s&&t.jsxs("div",{className:"field",style:{display:"grid",gridTemplateColumns:"120px 1fr",gap:8,alignItems:"start",gridColumn:"1 / -1"},children:[t.jsx("label",{style:{paddingTop:8},children:"활동 설명"}),t.jsx("textarea",{value:z,onChange:e=>et(e.target.value),placeholder:"활동 설명 입력",rows:3})]}),t.jsxs("div",{className:"field",style:{display:"grid",gridTemplateColumns:s?"90px 260px":"120px 1fr",gap:s?6:8,alignItems:"center"},children:[t.jsx("label",{children:"활동유형 *"}),t.jsx("select",{value:B,onChange:e=>{const i=e.target.value;gt(i);const a={정기방문:"방문",영업기회:"방문",채권관리:"전화"};a[i]&&at(a[i])},children:te.map(e=>t.jsx("option",{value:e.value,children:e.label},e.value))})]}),t.jsxs("div",{className:"field",style:{display:"grid",gridTemplateColumns:s?"90px 260px":"120px 1fr",gap:s?6:8,alignItems:"center"},children:[t.jsx("label",{children:"활동방법"}),t.jsx("select",{value:K,onChange:e=>at(e.target.value),children:ae.map(e=>t.jsx("option",{value:e.value,children:e.label},e.value))})]}),t.jsxs("div",{className:"field",style:{display:"grid",gridTemplateColumns:s?"90px 260px":"120px 1fr",gap:s?6:8,alignItems:"center"},children:[t.jsx("label",{children:"상태 *"}),t.jsx("select",{value:A,onChange:e=>yt(e.target.value),disabled:!!s,children:ee.map(e=>t.jsx("option",{value:e.value,children:e.label},e.value))})]}),!s&&t.jsxs("div",{className:"field",style:{display:"grid",gridTemplateColumns:"120px 1fr",gap:8,alignItems:"center"},children:[t.jsx("label",{children:"상위 활동"}),t.jsxs("select",{value:O,onChange:e=>Nt(e.target.value),onFocus:()=>{try{Z()}catch{}},onClick:()=>{try{Z()}catch{}},disabled:ot,title:ot?"하위활동이 존재하여 상위활동을 변경할 수 없습니다":void 0,children:[t.jsx("option",{value:"",children:"선택"}),Ft.map(e=>{const i={site_visit:"정기방문",opportunity:"영업기회",AR_mgmt:"채권관리",meeting:"미팅",call:"전화",email:"이메일",demo:"데모",task:"업무",other:"기타"},a={scheduled:"계획",completed:"완료",canceled:"취소",postponed:"연기",no_show:"미방문"},d=e.activityType?i[e.activityType]||e.activityType:"",m=e.activityStatus?a[e.activityStatus]||e.activityStatus:"",p=`${e.subject||""}${d||m?` · ${d}${d&&m?" / ":""}${m}`:""}`;return t.jsx("option",{value:e.id,children:p},e.id)})]})]}),t.jsxs("div",{className:"field",style:{display:"grid",gridTemplateColumns:s?"90px 260px":"120px 1fr",gap:s?6:8,alignItems:"center"},children:[t.jsx("label",{children:"계획 일시"}),t.jsxs("div",{className:"datetime-wrapper",children:[t.jsx("input",{type:"datetime-local",className:C?"":"empty",value:C,onChange:e=>G(e.target.value),autoComplete:"off",disabled:!!s,title:s?"달력에서 선택된 일시로 설정됩니다":void 0}),!C&&t.jsx("span",{className:"datetime-placeholder",children:"YYYY-MM-DD HH:MM"})]})]}),!s&&t.jsxs("div",{className:"field",style:{display:"grid",gridTemplateColumns:"120px 1fr",gap:8,alignItems:"center"},children:[t.jsx("label",{children:"종료 일시"}),t.jsxs("div",{className:"datetime-wrapper",children:[t.jsx("input",{type:"datetime-local",className:D?"":"empty",value:D,onChange:e=>U(e.target.value),autoComplete:"off"}),!D&&t.jsx("span",{className:"datetime-placeholder",children:"YYYY-MM-DD HH:MM"})]})]}),zt,!s&&t.jsxs("div",{className:"field",style:{display:"flex",flexDirection:"row",alignItems:"center",gap:16,gridColumn:"1 / -1"},children:[t.jsxs("label",{className:"muted",style:{display:"inline-flex",alignItems:"center",gap:8},children:[t.jsx("input",{className:"checkbox-accent",type:"checkbox",checked:F,onChange:e=>Bt(e.target.checked)}),t.jsx("span",{children:"종일"})]}),t.jsxs("label",{className:"muted",style:{display:"inline-flex",alignItems:"center",gap:8},children:[t.jsx("input",{className:"checkbox-accent",type:"checkbox",checked:J,onChange:e=>Ut(e.target.checked)}),t.jsx("span",{children:"비공개"})]})]}),!s&&!v&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"field",style:{display:"grid",gridTemplateColumns:"120px 1fr",gap:8,alignItems:"center",gridColumn:"1 / -1"},children:[t.jsx("label",{children:"거래처"}),t.jsx(Rt,{value:y?y.name||y.id||"":o?o.customerName||String(o.customerId||""):H||"",onChange:y||o?void 0:xt,placeholder:"거래처명 또는 ID",readOnly:!!y||!!o})]}),t.jsxs("div",{className:"field",style:{display:"grid",gridTemplateColumns:"120px 1fr",gap:8,alignItems:"center"},children:[t.jsx("label",{children:"거래처 담당자"}),t.jsx("input",{type:"text",value:"기능 미구현",readOnly:!0,disabled:!0})]}),t.jsxs("div",{className:"field",style:{display:"grid",gridTemplateColumns:"120px 1fr",gap:8,alignItems:"center"},children:[t.jsx("label",{children:"영업기회"}),t.jsx("input",{type:"text",value:"기능 미구현",readOnly:!0,disabled:!0})]})]}),!s&&t.jsxs("div",{className:"field",style:{display:"grid",gridTemplateColumns:"120px 1fr",gap:8,alignItems:"center",gridColumn:"1 / -1"},children:[t.jsx("label",{children:"가시성"}),t.jsx("select",{value:V,onChange:e=>ft(e.target.value),children:se.map(e=>t.jsx("option",{value:e,children:e},e))})]})]}),It&&t.jsx("div",{className:"error",style:{marginBottom:8},children:It}),t.jsxs("div",{className:"controls",style:{display:"flex",gap:8},children:[t.jsx("button",{className:"btn",onClick:Xt,disabled:rt||!b,children:rt?c?"수정 중…":"저장 중…":c?"수정":"저장"}),c&&t.jsx("button",{className:"btn",onClick:()=>ct(!0),disabled:rt,style:{background:"#dc2626",borderColor:"#dc2626"},children:"삭제"})]})]}),Tt.open?t.jsx("div",{role:"dialog","aria-modal":"true",className:"card",style:{position:"fixed",inset:0,background:"rgba(0,0,0,.45)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:70},children:t.jsxs("div",{className:"card",style:{background:"var(--panel)",padding:12,border:"1px solid var(--border)",borderRadius:10,minWidth:260,maxWidth:"86vw"},children:[t.jsx("div",{style:{marginBottom:8,fontWeight:700,textAlign:"center"},children:Tt.text}),t.jsx("div",{style:{display:"flex",justifyContent:"center"},children:t.jsx("button",{className:"btn btn-card btn-3d",onClick:()=>{E({open:!1,text:""});try{R&&R()}catch{}},children:"확인"})})]})}):null,Ct?t.jsx("div",{role:"dialog","aria-modal":"true",className:"card",style:{position:"fixed",inset:0,background:"rgba(0,0,0,.3)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:70},children:t.jsxs("div",{className:"card",style:{background:"var(--panel)",padding:12,border:"1px solid var(--border)",borderRadius:10,minWidth:260,maxWidth:"86vw"},children:[t.jsx("div",{style:{marginBottom:8,fontWeight:700,textAlign:"center",color:"#b91c1c"},children:Ct}),t.jsx("div",{style:{display:"flex",justifyContent:"center"},children:t.jsx("button",{className:"btn btn-card btn-3d",onClick:()=>{Q(null),k(null)},children:"확인"})})]})}):null,Vt?t.jsx("div",{role:"dialog","aria-modal":"true",className:"card",style:{position:"fixed",inset:0,background:"rgba(0,0,0,.45)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:70},children:t.jsxs("div",{className:"card",style:{background:"var(--panel)",padding:12,border:"1px solid var(--border)",borderRadius:10,minWidth:260,maxWidth:"86vw"},children:[t.jsx("div",{style:{marginBottom:8,fontWeight:700,textAlign:"center"},children:"이 활동을 삭제하시겠습니까?"}),t.jsx("div",{style:{marginBottom:12,fontSize:13,textAlign:"center",color:"#6b7280"},children:"삭제된 데이터는 복구할 수 없습니다."}),t.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:8},children:[t.jsx("button",{className:"btn btn-card btn-3d",onClick:()=>ct(!1),style:{background:"#6b7280",borderColor:"#6b7280"},children:"취소"}),t.jsx("button",{className:"btn btn-card btn-3d",onClick:Zt,style:{background:"#dc2626",borderColor:"#dc2626"},children:"삭제"})]})]})}):null]})}function ne(h){return new Date(h.getFullYear(),h.getMonth(),h.getDate())}function ge(h=0,g){const x=ne(new Date),q=(x.getDay()-1+7)%7,s=new Date(x);s.setDate(x.getDate()-q+h*7);const _=new Date(s);return _.setDate(s.getDate()+6),{start:s,end:_}}function Lt(h){const g=h.getFullYear(),c=String(h.getMonth()+1).padStart(2,"0"),v=String(h.getDate()).padStart(2,"0");return`${g}-${c}-${v}`}function ye(h){return`${Lt(h.start)} ~ ${Lt(h.end)}`}export{Rt as S,fe as a,ye as f,ge as g};
